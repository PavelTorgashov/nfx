'use strict';var WAVE=function(){function g(a,d){r in a||(a[r]={});var k=a[r];d in k||(k[d]=[]);return k[d]}function n(a){e in a||(a[e]=[]);return a[e]}function p(){var a=f.id(b.DIV_SUMMARY);if(a){var d;d='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var k=0,u=0,e;for(e in c){var q=f.id(c[e]);q&&(d+=f.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<q.STAT_FAILED_TESTS?"class="+b.CSS_CLASS_TABLEERROR:
"",Area:q.STAT_NAME,Total:q.STAT_TOTAL_TESTS,Passed:q.STAT_TOTAL_TESTS-q.STAT_FAILED_TESTS,Failed:q.STAT_FAILED_TESTS}),k+=q.STAT_TOTAL_TESTS,u+=q.STAT_FAILED_TESTS)}d+=f.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:b.CSS_CLASS_TABLETOTAL,Total:k,Passed:k-u,Failed:u});a.innerHTML=d+"</table>"}}Date.now||(Date.now=function(){return(new Date).getTime()});var f={TUNDEFINED:"undefined",falseness:function(){return!1},falsefunc:function(){return!1},
arrayDelete:function(a,d){for(var k in a)if(a[k]===d)return a.splice(k,1),!0;return!1},arrayShallowCopy:function(a){var d=[];if(a&&0<a.length)for(var k=0,u=a.length;k<u;k++)d.push(a[k]);return d},arrayClear:function(a){for(;0<a.length;)a.pop()}};f.inArray=Array.prototype.indexOf?function(a,d){return-1!==a.indexOf(d)}:function(a,d){for(var k=a.length;k--;)if(a[k]===d)return!0;return!1};f.isObject=function(a){return"undefined"===typeof a?!1:a===Object(a)&&!f.isArray(a)&&!f.isFunction(a)};f.isArray=
function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};f.isFunction=function(a){return"function"===typeof a};f.isMapOrArray=function(a){return a===Object(a)&&!f.isFunction(a)};f.overrideFunction=function(a,d){return function(){this.baseFunction=a;return d.apply(this,arguments)}};f.extend=function(a,d,k){var u;if(k)for(u in d)d.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=d[u]);else for(u in d)d.hasOwnProperty(u)&&(a[u]=d[u]);return a};f.clone=function(a){return JSON.parse(JSON.stringify(a))};
f.isSame=function(a,d){if(2>arguments.length)return!1;if(null===a&&null===d)return!0;if(null===a||null===d||typeof a!==typeof d)return!1;if("function"===typeof a.getTime)return a.getTime()===d.getTime();if(f.isMapOrArray(a)){if(a.length!==d.length||Object.keys(a).length!==Object.keys(d).length)return!1;for(var k in a)if(!f.isSame(a[k],d[k]))return!1;return!0}return a===d};f.propStrAsObject=function(a,d){if(null!==a&&!f.strEmpty(d)&&a.hasOwnProperty(d)){var k=a[d];if(null!==k&&"string"===typeof k)try{a[d]=
JSON.parse(k)}catch(u){throw console.error("WV.propStrAsObject, error parsing property '"+d+"' string as JSON: "+k),u;}}};f.intValid=function(a){if(!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)?!1:!0};f.intValidPositive=function(a){if(!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)||0>=a?!1:!0};f.intValidPositiveOrZero=function(a){if(0!==a&&!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)||0>a?!1:!0};f.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};f.strDefault=
function(a,d){return"undefined"===typeof a||null===a?"undefined"===typeof d||null===d?"":d:a};f.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};f.strLTrim=function(a){return a.replace(/^\s+/,"")};f.strRTrim=function(a){return a.replace(/\s+$/,"")};f.strTrunc=function(a,d,k){if(!a||a.length<=d)return a;k=k||"...";return a.substr(0,d-k.length)+k};f.strCaps=function(a,d){if(f.strEmpty(a))return a;for(var k,u="",b=!1,q=0;q<a.length;q++)k=a[q]," "===k||"."===k?(b=!0,u+=k):(u=b||0===q?u+k.toUpperCase():
u+(d?k.toLowerCase():k),b=!1);return u};var v="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");f.siNum=function(a,d){"undefined"===typeof d&&(d=2);if(0===a)return a.toFixed(d);var k=a;0>a&&(k=-k);for(var u=0,b=k.toFixed(d)+v[u+8];1E3<=k;)k/=1E3,u++;for(;1>k;)k*=1E3,u--;b=Math.pow(10,d);for(k=Math.round(k*b)/b;1E3<=k;)k/=1E3,u++;for(;1>k;)k*=1E3,u--;0>a&&(k=-k);return b=k.toFixed(d)+v[u+8]};f.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};f.strStartsWith=
function(a,d,k){return k?a.slice(0,d.length)===d:a.slice(0,d.length).toLowerCase()===d.toLowerCase()};f.strEndsWith=function(a,d,k){return k?a.slice(-d.length)===d:a.slice(-d.length).toLowerCase()===d.toLowerCase()};f.strEnsureEnding=function(a,d){return a+(a.slice(-d.length)===d?"":d)};f.strContains=function(a,d,k){return k?-1<a.indexOf(d):-1<a.toLowerCase().indexOf(d.toLowerCase())};f.strSame=function(a,d){return"undefined"===typeof a||"undefined"===typeof d||null===a||null===d?!1:f.strTrim(a).toLowerCase()===
f.strTrim(d).toLowerCase()};f.strOneOf=function(a,d,k){if(null===a||null===d||!f.isArray(d))return!1;k||(k="|");a=k+f.strTrim(a).toLowerCase()+k;return 0<=(k+d.join(k)+k).toLowerCase().indexOf(a)};var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};f.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return t[a]})};f.strHTMLTemplate=function(a,d){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,u){return f.strEscapeHTML(d[u])})};f.strTemplate=
function(a,d){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,u){return d[u]})};f.strIsEMail=function(a){if(f.strEmpty(a))return!1;var d=a.indexOf("@");if(1>d||d===a.length-1||0<=a.indexOf("@",d+1))return!1;var k=a.lastIndexOf(".");if(!(k>d+2&&k+2<=a.length))return!1;for(k=0;k<a.length;k++)if(d=a[k],"."!==d&&"@"!==d&&"-"!==d&&"_"!==d&&!f.isValidScreenNameLetterOrDigit(d))return!1;return!0};f.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=
a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
f.isValidScreenNameLetterOrDigit=function(a){return f.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};f.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};f.strIsScreenName=function(a){if(f.strEmpty(a))return!1;a=f.strTrim(a);if(0===a.length)return!1;for(var d=!1,k,u=0;u<a.length;u++)if(k=a[u],0===u){if(!f.isValidScreenNameLetter(k))return!1}else if(f.isValidScreenNameSeparator(k)){if(d)return!1;d=!0}else{if(!f.isValidScreenNameLetterOrDigit(k))return!1;d=!1}return!d};f.strNormalizeUSPhone=
function(a){if(f.strEmpty(a))return"";a=f.strTrim(a);if(0===a.length)return"";if(f.strStartsWith(a,"+",!0))return a;for(var d=!1,k=!1,u="",b="",q="",c,e=0;e<a.length;e++)if(c=a[e],d||"("!==c||0!==u.length)if(d&&")"===c)d=!1;else{d&&3===u.length&&(d=!1);if(0<b.length&&!k){if("x"===c||"X"===c||"."===c&&6<b.length){k=!0;continue}var l=a.substring(e).toUpperCase();if(f.strStartsWith(l,"EXT",!1)&&7<=b.length){k=!0;e+=2;continue}if(f.strStartsWith(l,"EXT.",!1)&&7<=b.length){k=!0;e+=3;continue}}f.charIsAZLetterOrDigit(c)&&
(d?u+=c:k?q+=c:b+=c)}else d=!0;for(;7>b.length;)b+="?";0===u.length&&(10<=b.length?(u=b.substring(0,3),b=b.substring(3)):u="???");7<b.length&&0===q.length&&(q=b.substring(7),b=b.substring(0,7));b=b.substring(0,3)+"-"+b.substring(3);0<q.length&&(q="x"+q);return"("+u+") "+b+q};f.LOCALIZER={eng:{},rus:{},deu:{}};f.strLocalize=function(a,d,k,b){if(4>arguments.length||f.strEmpty(a)||f.strEmpty(b))return b;f.strEmpty(d)&&(d="--ANY-SCHEMA--");f.strEmpty(k)&&(k="--ANY-FIELD--");var c=f.LOCALIZER;if(!c.hasOwnProperty(a))return b;
c=c[a];if(c.hasOwnProperty(d))c=c[d];else{if(!c.hasOwnProperty("--ANY-SCHEMA--"))return b;c=c["--ANY-SCHEMA--"]}if(c.hasOwnProperty(k))c=c[k];else{if(!c.hasOwnProperty("--ANY-FIELD--"))return b;c=c["--ANY-FIELD--"]}return c.hasOwnProperty(b)?c[b]:b};f.toISODateTimeString=function(a){function d(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+d(a.getUTCMonth()+1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+"Z"};f.toUSDateTimeString=function(a){function d(a){return 10>
a?"0"+a:a}return d(a.getMonth()+1)+"/"+d(a.getDate())+"/"+d(a.getFullYear())+" "+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())};f.toUSDateString=function(a){function d(a){return 10>a?"0"+a:a}return d(a.getMonth()+1)+"/"+d(a.getDate())+"/"+d(a.getFullYear())};f.toSeconds=function(a){var d=0,k=a.match(/(\d+)\s*d/),b=a.match(/(\d+)\s*h/),c=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);k&&(d+=86400*parseInt(k[1]));b&&(d+=3600*parseInt(b[1]));c&&(d+=60*parseInt(c[1]));a&&(d+=parseInt(a[1]));
return d};f.genRndKey=function(a,d){var k="";f.intValidPositive(a)||(a=8);for(f.strEmpty(d)&&(d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");k.length<a;)k+=d.charAt(f.rnd(d.length));return k};var x={};f.genAutoincKey=function(a,d){var k=0;f.strEmpty(a)&&(a="Unspecified");f.intValidPositive(d)||(d=1);a in x&&(k=x[a]);var b=k;x[a]=k+d;return b};f.isScalar=function(a){return/boolean|number|string/.test(typeof a)};f.rnd=function(){var a=0,d=100;1===arguments.length?d=arguments[0]:2===arguments.length&&(a=
arguments[0],d=arguments[1]);return a+Math.floor(Math.random()*(d-a+1))};f.id=function(a){return document.getElementById(a)};f.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};f.setCookie=function(a,d){var k=a+"="+escape(d)+"; path=/";document.cookie=k};f.deleteCookie=function(a){f.setCookie(a,null,{expires:-1})};f.isObjectType=function(a){return f.strOneOf(a,["object","json","map",
"array"])};f.isIntType=function(a){return f.strOneOf(a,["int","integer"])};f.isRealType=function(a){return f.strOneOf(a,["float","real","double","money"])};f.isBoolType=function(a){return f.strOneOf(a,["bool","boolean","logical"])};f.isStringType=function(a){return f.strOneOf(a,"str string char[] char varchar text".split(" "))};f.isDateType=function(a){return f.strOneOf(a,["date","datetime","time","timestamp"])};f.convertScalarType=function(a,d,k,b){function c(){if("undefined"!==typeof b&&null!==
b)return b;null===d&&(d="<null>");throw"Can not convert '"+d+"' to type '"+k+"'";}if(f.strEmpty(k))return d;var q;if(f.isObjectType(k)){if(null===d)return a?null:{};if(f.isObject(d))return d;q=typeof d;if("boolean"===q)return d?{value:!0}:{value:!1};if(f.isFunction(d.getTime)||"number"===q)return{value:d};if("string"===q)try{return JSON.parse(d)}catch(e){return{value:d}}}else if(f.isIntType(k)){if(null===d)return a?null:0;q=typeof d;if("boolean"===q)return d?1:0;if(f.isFunction(d.getTime))return d.getTime();
if("number"===q||"object"===q)q="string",d=d.toString();if("string"===q){if(f.strEmpty(d))return a?null:0;a=parseInt(d);if(!isNaN(a))return a}}else{if(f.isStringType(k)){if(null===d)return a?null:"";q=typeof d;return"string"===q?d:"boolean"===q?d?"true":"false":f.isFunction(d.getTime)?f.toUSDateTimeString(d):d.toString()}if(f.isRealType(k)){if(null===d)return a?null:0;q=typeof d;if("boolean"===q)return d?1:0;if(f.isFunction(d.getTime))return d.getTime();if("number"===q||"object"===q)q="string",d=
d.toString();if("string"===q){if(f.strEmpty(d))return a?null:0;a=parseFloat(d);if(!isNaN(a))return a}}else{if(f.isBoolType(k))return d?!0:!1;if(f.isDateType(k)){if(null===d)return a?null:c();if("number"===typeof d)return new Date(Math.round(d));if(f.strEmpty(d)&&a)return null;a=Date.parse(d);if(!isNaN(a))return new Date(a)}}}return c()};f.EventManager={ANY_EVENT:"*",eventBind:function(a,d){if(f.strEmpty(a)||!d)return!1;var k=g(this,a);if(f.inArray(k,d))return!1;k.push(d);return!0},eventUnbind:function(a,
d){if(f.strEmpty(a)||!d)return!1;var k=g(this,a);return f.arrayDelete(k,d)},eventClear:function(a){if(f.strEmpty(a))return this[r]={},!0;a=g(this,a);f.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(f.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;var d=Array.prototype.slice.call(arguments,1);d.splice(0,0,this);var k=g(this,a),b;for(b in k)k[b].apply(this,d);d.splice(0,0,a);k=g(this,"*");for(b in k)k[b].apply(this,d);k=n(this);for(b in k){var c=k[b],q=
c.eventNotify;WAVE.isFunction(q)&&q.apply(c,d)}return!0},eventSinkBind:function(a){if(null===a)return!1;var d=n(this);if(f.inArray(d,a))return!1;d.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var d=n(this);return f.arrayDelete(d,a)},eventSinkClear:function(){this[e]=[]},eventSinks:function(){return n(this)}};var r="@!WAVE EVENT FUN LIST",e="@!WAVE EVENT SINK LIST",b={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",
CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},l=[],c={},y=!1;b.run=function(a,d,k){y||(y=!0,setTimeout(p,1E3));f.strEmpty(a)&&(a="Unspecified");var u=null;a in c?u=c[a]:(u=b.DIV_AREA_PREFIX+f.genAutoincKey("UtestingArea"),c[a]=u);var e=f.id(u);e||(e=document.createElement("div"),e.id=u,e.className=b.CSS_CLASS_AREA,document.body.appendChild(e),e.innerHTML=
"<h2>"+a+"</h2>",e.STAT_NAME=a,e.STAT_TOTAL_TESTS=0,e.STAT_FAILED_TESTS=0);a="";try{l=[],e.STAT_TOTAL_TESTS+=1,k()}catch(m){e.STAT_FAILED_TESTS+=1,a=m}k=!f.strEmpty(a);var q=b.DIV_TEST_PREFIX+f.genAutoincKey("UtestingCase"),u=document.createElement("div");u.id=q;u.className=k?b.CSS_CLASS_ERROR:b.CSS_CLASS_OK;d="<div class='"+b.CSS_CLASS_TESTTITLE+"'>"+d+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(k?"FAILED":"PASSED")+"</div>";k&&(d+="&nbsp;&nbsp;Error: "+a);if(0<l.length){d+="<pre>";for(var K in l)d+=" "+l[K];d+=
"</pre>"}u.innerHTML=d;e.appendChild(u)};b.testingStarted=function(){return y};b.log=function(a){l.push("  &gt; "+a+"\n")};b.logi=function(a){l.push(a)};b.assertTrue=function(a,d){f.strEmpty(d)&&(d="Assertion not true");if(!a)throw d;};b.assertFalse=function(a,d){f.strEmpty(d)&&(d="Assertion not false");if(a)throw d;};f.UTest=b;var h={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),
IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};
h.iOS=h.iPhone||h.iPod||h.iPad;h.Mobile=h.iOS||h.Android||h.OperaMini||h.OperaMobi||h.BlackBerry||h.WebOS||h.IEMobile||h.WinPhone||h.Silk;h.WebKit=h.Chrome||h.Safari;f.Platform=h;var m={EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,d,k,b){return Math.sqrt(Math.pow(a-
k,2)+Math.pow(d-b,2))},distancePoints:function(a,d){return m.distance(a.x(),a.y(),d.x(),d.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,d,k,b){a=Math.atan2(b-d,k-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,d){return m.azimuthRad(a.x(),a.y(),d.x(),d.y())},azimuthDeg:function(a,d,k,b){return m.azimuthRad(a,d,k,b)/6.28318531*360},azimuthDegPoints:function(a,d){return m.azimuthDeg(a.x(),a.y(),d.x(),d.y())},azimuthOfRadix:function(a,
d,k,b,c){2>c&&(c=2);a=m.azimuthRad(a,d,k,b);a=m.wrapAngle(a,3.14159265/c);return Math.floor(a/6.28318531*c)},azimuthOfRadixPoints:function(a,d,k){return m.azimuthOfRadix(a.x(),a.y(),d.x(),d.y(),k)},toRectXY:function(a,d,k,b){return new m.Rectangle(new m.Point(a,d),new m.Point(k,b))},toRectWH:function(a,d,k,b){return new m.Rectangle(new m.Point(a,d),new m.Point(a+k,d+b))},overlapAreaRect:function(a,d){var k=a.topLeft(),b=d.topLeft();return m.overlapAreaWH(k.x(),k.y(),a.width(),a.height(),b.x(),b.y(),
d.width(),d.height())},overlapAreaWH:function(a,d,k,b,c,q,e,l){a=e>=k?a<=c?a+k-c:a+k>=c+e?c+e-a:k:c<=a?c+e-a:c+e>=a+k?a+k-c:e;d=l>=b?d<=q?d+b-q:d+b>=q+l?q+l-d:b:q<=d?q+l-d:q+l>=d+b?d+b-q:l;0>a&&(a=0);0>d&&(d=0);return a*d},overlapAreaXY:function(a,d,k,b,c,q,e,l){return m.overlapAreaWH(a,d,k-a,b-d,c,q,e-c,l-q)},lineIntersectsRect:function(a,d,k,b,c,q,e,l){l=q-l;e-=c;c=-(l*c+e*q);q=l*a+e*d+c;var m=0===q?0:0<q?1:-1;q=l*a+e*b+c;if((0===q?0:0<q?1:-1)!==m)return!0;q=l*k+e*d+c;if((0===q?0:0<q?1:-1)!==m)return!0;
q=l*k+e*b+c;return(0===q?0:0<q?1:-1)!==m?!0:!1},intersectionLengthRectLineXY:function(a,d,b,c,e,q,l,h){return m.lineIntersectsRect(a,d,b,c,e,q,l,h)?m.distance(e<a?a:e>b?b:e,q<d?d:q>c?c:q,l<a?a:l>b?b:l,h<d?d:h>c?c:h):0},wrapAngle:function(a,d){d%=6.28318531;0>d&&(d=6.28318531+d);return(a+d)%6.28318531},mapDirectionToAngle:function(a){switch(a){case m.MapDirection.North:return 1.5707963275;case m.MapDirection.South:return 4.7123889825;case m.MapDirection.East:return 0;case m.MapDirection.West:return 3.141592655;
case m.MapDirection.NorthEast:return.78539816375;case m.MapDirection.NorthWest:return 2.35619449125;case m.MapDirection.SouthEast:return 5.49778714625;case m.MapDirection.SouthWest:return.625*6.28318531;default:return 0}},angleToMapDirection:function(a){a=m.wrapAngle(a,0);return 0<=a&&.392699081875>a?m.MapDirection.East:.392699081875<=a&&1.178097245625>a?m.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?m.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?m.MapDirection.NorthWest:
2.748893573125<=a&&3.534291736875>a?m.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?m.MapDirection.SouthWest:a>=6.28318531*11/16&&5.105088064375>a?m.MapDirection.South:5.105088064375<=a&&a<6.28318531*15/16?m.MapDirection.SouthEast:m.MapDirection.East},perimeterViolationArea:function(a,d){var b=0,c=0;d.left()<a.left()?b=a.left()-d.left():d.right()>a.right()&&(b=d.right()-a.right());d.top()<a.top()?c=a.top()-d.top():d.bottom()>a.bottom()&&(c=d.bottom()-a.bottom());return b*d.height()+c*d.width()},
findRayFromRectangleCenterSideIntersection:function(a,d){var b=new m.Point(a.left()+a.width()/2,a.top()+a.height()/2),c=a.width()>a.height()?a.width():a.height();100>c&&(c=100);var e=new m.PolarPoint(c,d),c=e.toPoint(),q=0!==c.x()?c.y()/c.x():0,l=0,h=0,c=[],l=b.x()+(0!==q?(a.top()-b.y())/q:0),h=a.top();l>=a.left()&&l<=a.right()&&c.push(new m.Point(l,h));l=b.x()+(0!==q?(a.bottom()-b.y())/q:0);h=a.bottom();l>=a.left()&&l<=a.right()&&c.push(new m.Point(l,h));l=a.right();h=b.y()+q*(a.right()-b.x());h>=
a.top()&&h<=a.bottom()&&c.push(new m.Point(l,h));l=a.left();h=b.y()+q*(a.left()-b.x());h>=a.top()&&h<=a.bottom()&&c.push(new m.Point(l,h));q=new m.Point(1E6,1E6);l=1E6;e=e.toPoint();e.offset(b.x(),b.y());for(var y in c)b=c[y],h=m.distancePoints(b,e),h<l&&(q=b,l=h);return q},rotateRectAroundCircle:function(a,d,b,c,e,q){c/=2;e/=2;a+=Math.cos(q)*(c+b);d+=Math.sin(q)*(e+b);return new m.toRectXY(a-c,d-e,a+c,d+e)},getBBox:function(a){if(!a)return null;var d=a.length;if(0===d)return null;for(var b=Number.POSITIVE_INFINITY,
c=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,l=0;l<d;l++){var h=a[l],y=h.x,h=h.y;y<b&&(b=y);y>c&&(c=y);h<e&&(e=h);h>q&&(q=h)}return m.toRectXY(b,e,c,q)},Point:function(a,d){var b=a;this.x=function(a){"undefined"!==typeof a&&(b=a);return b};var c=d;this.y=function(a){"undefined"!==typeof a&&(c=a);return c};this.offset=function(a,d){b+=a;c+=d}}};m.Point.prototype.toPolarPoint=function(a){var d=m.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>
a&&(a=6.28318531+a);return new m.PolarPoint(d,a)};m.Point.prototype.isEqual=function(a){return this.x()===a.x()&&this.y()===a.y()};m.Point.prototype.toString=function(){return"("+this.x().toString()+" , "+this.y().toString()+")"};m.PolarPoint=function(a,d){function b(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var c=a;this.radius=function(a){"undefined"!==typeof a&&(c=a);return c};var e=b(d);this.theta=function(a){"undefined"!==typeof a&&(e=b(a));return e};this.toPoint=
function(){return new m.Point(c*Math.cos(e),c*Math.sin(e))}};m.PolarPoint.prototype.isEqual=function(a){return this.radius()===a.radius()&&this.theta()===a.theta()};m.PolarPoint.prototype.toString=function(){return"("+this.radius().toString()+" , "+m.radToDeg(this.theta()).toString()+"\u00b0)"};m.Rectangle=function(a,d){var b=this,c=a,e=d;this.corner1=function(a){"undefined"!==typeof a&&(c=a);return c};this.corner2=function(a){"undefined"!==typeof a&&(e=a);return e};this.topLeft=function(){var a=
c.x(),d=e.x();d<a&&(a=d);var b=c.y(),d=e.y();d<b&&(b=d);return new m.Point(a,b)};this.bottomRight=function(){var a=c.x(),d=e.x();d>a&&(a=d);var b=c.y(),d=e.y();d>b&&(b=d);return new m.Point(a,b)};this.width=function(){return Math.abs(c.x()-e.x())};this.height=function(){return Math.abs(c.y()-e.y())};this.left=function(){var a=c.x(),d=e.x();d<a&&(a=d);return a};this.right=function(){var a=c.x(),d=e.x();d>a&&(a=d);return a};this.top=function(){var a=c.y(),d=e.y();d<a&&(a=d);return a};this.bottom=function(){var a=
c.y(),d=e.y();d>a&&(a=d);return a};this.centerPoint=function(){return new m.Point(b.left()+b.width()/2,b.top()+b.height()/2)};this.square=function(){return b.width()*b.height()};this.contains=function(a){var d=b.topLeft(),c=b.bottomRight(),e=a.x();a=a.y();return e>=d.x()&&e<=c.x()&&a>=d.y()&&a<=c.y()}};m.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};m.Rectangle.prototype.toString=function(){return"("+
this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};m.vectorizeBalloon=function(a,d,b){var c=[],e=new m.Point(a.left()+a.width()/2,a.top()+a.height()/2),l=d.toPolarPoint(e),h=m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(l.theta(),-b/2));b=m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(l.theta(),+b/2));c.push(new m.Point(a.left(),a.top()));c.push(new m.Point(a.right(),a.top()));c.push(new m.Point(a.right(),a.bottom()));
c.push(new m.Point(a.left(),a.bottom()));c.push(h);c.push(d);c.push(b);c.sort(function(a,d){var b=a.toPolarPoint(e),c=d.toPolarPoint(e);return b.theta()>c.theta()?-1:1});return c};f.Geometry=m;f.Walkable={wSelect:function(a){var d=this,b={getWalker:function(){var b=d.getWalker(),c;return{reset:function(){b.reset()},moveNext:function(){if(!b.moveNext())return!1;c=a(b.current());return!0},current:function(){return c}}}};WAVE.extend(b,WAVE.Walkable);return b},wSelectMany:function(a){var d=this,b={getWalker:function(){var b=
d.getWalker(),c,k;return{reset:function(){for(b.reset();b.moveNext();){var d=b.current();if(null!==d){c=(a?a(d):d).getWalker();break}}},moveNext:function(){if(c&&c.moveNext())return k=c.current(),!0;for(;b.moveNext();){var d=b.current();if(null!==d&&(c=(a?a(d):d).getWalker(),c.moveNext()))return k=c.current(),!0}return!1},current:function(){return k}}}};WAVE.extend(b,WAVE.Walkable);return b},wWhere:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();return{reset:function(){b.reset()},
moveNext:function(){for(;b.moveNext();)if(a(b.current()))return!0;return!1},current:function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAt:function(a){for(var d=this.getWalker(),b=-1;d.moveNext();)if(b++,b===a)return d.current();return null},wFirst:function(a){for(var d=this.getWalker();d.moveNext();)if(a){if(a(d.current()))return d.current()}else return d.current();return null},wFirstIdx:function(a){for(var d=this.getWalker(),b=-1;d.moveNext();)if(b++,a(d.current()))return b;
return-1},wCount:function(a){for(var d=this.getWalker(),b=0;d.moveNext();)a?a(d.current())&&b++:b++;return b},wDistinct:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();return new function(){function d(c){return a?a(c,b.current()):c===b.current()}var c=[],k=WAVE.arrayWalkable(c);this.reset=function(){b.reset();c.splice(0,c.length)};this.moveNext=function(){for(;b.moveNext();)if(-1===k.wFirstIdx(d))return c.push(b.current()),!0;return!1};this.current=function(){return b.current()}}}};
WAVE.extend(b,WAVE.Walkable);return b},wConcat:function(a){var d=this,b={getWalker:function(){var b=d.getWalker(),c=null;return{reset:function(){b.reset();c=null},moveNext:function(){if(null===c){if(b.moveNext())return!0;c=a.getWalker()}return c.moveNext()},current:function(){return null===c?b.current():c.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wExcept:function(a,d){var b=this,c={getWalker:function(){function c(a){return d?d(e.current(),a):a===e.current()}var e=b.getWalker();return{reset:function(){e.reset()},
moveNext:function(){for(;e.moveNext();)if(-1===a.wFirstIdx(c))return!0;return!1},current:function(){return e.current()}}}};WAVE.extend(c,WAVE.Walkable);return c},wGroup:function(a,d){var b=this,c={getWalker:function(){return new function(){var c=b.wDistinct(function(d,b){return a(d)===a(b)}).getWalker();this.reset=function(){c.reset()};this.moveNext=function(){return c.moveNext()};this.current=function(){return{k:a(c.current()),v:b.wWhere(function(d){return a(d)===a(c.current())}).wSelect(function(a){return d(a)})}}}}};
WAVE.extend(c,WAVE.Walkable);return c},wGroupIntoObject:function(){var a={};this.wEach(function(d){a[d.k]=d.v.wToArray()});return a},wGroupIntoArray:function(a,d){var b=[];this.wEach(function(a){b.push({k:a.k,v:a.v.wToArray()})});return b},wGroupAggregate:function(a,d){var b=this,c={getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){return d.moveNext()},current:function(){var b=d.current();return{k:b.k,v:b.v.wAggregate(function(d,c){return a(b.k,d,c)})}}}}};
WAVE.extend(c,WAVE.Walkable);return c},wOrder:function(a){var d=this.wToArray();a||(a=function(a,d){return a<d?-1:a>d?1:0});d.sort(a);return WAVE.arrayWalkable(d)},wTake:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();return new function(){var d=0;this.reset=function(){b.reset();d=0};this.moveNext=function(){if(!(b.moveNext()&&d<a))return!1;d++;return!0};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wTakeWhile:function(a){var d=this,b={getWalker:function(){var b=
d.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()&&a(b.current())?!0:!1},current:function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wSkip:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();return new function(){var d=-1;this.reset=function(){b.reset();d=-1};this.moveNext=function(){for(;b.moveNext();)if(d++,d>=a)return!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAny:function(a){var d=
this.getWalker();if(!a)return d.moveNext();for(;d.moveNext();)if(a(d.current()))return!0;return!1},wAll:function(a){var d=this.getWalker();if(!a)return!d.moveNext();for(;d.moveNext();)if(!a(d.current()))return!1;return!0},wMin:function(a){a||(a=function(a,d){return a<d});var d=this.getWalker();if(!d.moveNext())return null;for(var b=d.current();d.moveNext();)a(d.current(),b)&&(b=d.current());return b},wMax:function(a){a||(a=function(a,d){return a>d});var d=this.getWalker();if(!d.moveNext())return null;
for(var b=d.current();d.moveNext();)a(d.current(),b)&&(b=d.current());return b},wAggregate:function(a,d){var b=d;this.wEach(function(d){b=a(b,d)});return b},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,b){return a+b},a)},wEqual:function(a,d){var b=this.getWalker(),c=a.getWalker();do{var e=b.moveNext(),l=c.moveNext();if(!e&&!l)return!0;if(e!==l)return!1;e=b.current();l=c.current();if(!d){if(e!==l)return!1}else if(!d(e,l))return!1}while(1)},wToArray:function(){for(var a=
this.getWalker(),d=[];a.moveNext();)d.push(a.current());return d},wEach:function(a){for(var d=this.getWalker(),b=0;d.moveNext();)a(d.current(),b++);return this},wWMA:function(a){var d=this;"undefined"===typeof a&&(a=.5);var b={getWalker:function(){var b=d.getWalker(),c=null,e={s:-1,a:0};return{reset:function(){c=null;e={s:-1,a:0};b.reset()},moveNext:function(){if(!b.moveNext())return!1;e.s=b.current().s;var d=b.current().a;e.a=0===e.s?d:(1-a)*d+a*c;c=e.a;return!0},current:function(){return e},samplingRate:function(){return b.samplingRate?
b.samplingRate():2}}}};WAVE.extend(b,WAVE.Walkable);return b},wHarmonicFrequencyFilter:function(a,d){var b=this;"undefined"===typeof a&&(a=1);"undefined"===typeof d&&(d=1);1.0001>a&&(a=1.0001);1E-4>d&&(d=1E-4);var c={getWalker:function(){var c=b.getWalker(),e=0,l={s:-1,a:0},h=0,m=0;return{reset:function(){m=h=e=0;l={s:-1,a:0};c.reset()},moveNext:function(){if(!c.moveNext())return!1;l.s=c.current().s;var b=c.current().a,k=b-m;m=b;h+=(k-d*e)/a;h*=.98;l.a=e+h;e=l.a;return!0},current:function(){return l},
samplingRate:function(){return c.samplingRate?c.samplingRate():2}}}};WAVE.extend(c,WAVE.Walkable);return c},wConstLinearSampling:function(a){var d=this,b={getWalker:function(){a=a||1;var b=d.getWalker(),c=!1,e=null,l=a/2,k=0,h,m,y,g=[],r={};return new function(){this.reset=function(){g.splice(0,g.length);k=0;c=!1;e=null;b.reset()};this.moveNext=function(){function d(a,b){for(var c=0;c<g.length;c++){var e=g[c].s;if(e>a&&e<=b)return!0}return!1}function L(){if(b.moveNext())return e=b.current().s,!0;
c=!0;return!1}function n(a,d){for(var b=0,c=0,e=0;e<g.length;e++){var l=g[e];l.s>a&&l.s<=d&&(b+=l.a,c++)}return b/c}function f(a){for(;L();)if(b.current().s>=a){g.push(b.current());break}else g.push(b.current())}if(!k){if(!L())return!1;g.push(b.current());h=b.current().s;m=h-l;y=h+l;f(y);r.s=k++;var p=n(-Number.MAX_VALUE,y);r.a=p;return!0}h+=a;m=h-l;y=h+l;if(c&&e<m)return!1;r.s=k++;(function(a,d){for(;1<g.length&&g[0].s<a&&g[1].s<d;)g.shift()})(m,y);if(d(m,y))return r.a=n(m,y),!0;f(y);if(d(m,y))return r.a=
n(m,y),!0;var p=g[0],t=g[1],t=(t.a-p.a)/(t.s-p.s);r.a=t*h+(p.a-t*p.s);return!0};this.current=function(){return r}}}};WAVE.extend(b,WAVE.Walkable);return b},wSineGen:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,l=a.d||0,k=a.r||(b.samplingRate?b.samplingRate():2),h=a.p||0;2>k&&(k=2);var y=6.28318531/k*c,g=0,r=h,n={},b=d.getWalker();return new function(){this.reset=function(){g=0;r=h;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;
n.s=g++;n.a=e*Math.sin(r)+l+b.current().a;r=m.wrapAngle(r,y);return!0};this.current=function(){return n};this.samplingRate=function(){return k}}}};WAVE.extend(b,WAVE.Walkable);return b},wSawGen:function(a){var d=this,b={getWalker:function(){var b=d.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,l=a.d||0,k=a.r||(b.samplingRate?b.samplingRate():2),h=a.p||0,y=a.s||.9;2>k&&(k=2);var g=1/3.14159265/y,r=1/3.14159265/(y-1),n=1-2*y/(y-1),f=6.28318531/k*c,L=0,p=h,D={},b=d.getWalker();return new function(){this.reset=
function(){L=0;p=h;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;D.s=L++;D.a=e*(p<6.28318531*y?g*p+-1:r*p+n)+l+b.current().a;p=m.wrapAngle(p,f);return!0};this.current=function(){return D};this.samplingRate=function(){return k}}}};WAVE.extend(b,WAVE.Walkable);return b},wSquareGen:function(a){var b=this,c={getWalker:function(){var c=b.getWalker();a=a||{};var e=a.f||1,l="undefined"===typeof a.a?1:a.a,k=a.d||0,h=a.r||(c.samplingRate?c.samplingRate():2),y=a.p||0,g=a.s||.9;2>h&&(h=2);var r=
-2/3.14159265/(1-g),n=1-3.14159265*r*g,f=2/3.14159265/(1-g),p=-1-3.14159265*f*(1+g),L=6.28318531/h*e,E=0,D=y,G={},c=b.getWalker();return new function(){this.reset=function(){E=0;D=y;c.reset()};this.moveNext=function(){if(!c.moveNext())return!1;G.s=E++;G.a=l*(3.14159265>D?D<3.14159265*g?1:r*D+n:D<3.14159265+3.14159265*g?-1:f*D+p)+k+c.current().a;D=m.wrapAngle(D,L);return!0};this.current=function(){return G};this.samplingRate=function(){return h}}}};WAVE.extend(c,WAVE.Walkable);return c},wRandomGen:function(a){var b=
this,c={getWalker:function(){var c=b.getWalker();a=a||{};var e="undefined"===typeof a.a?1:a.a,l=a.r||(b.samplingRate?b.samplingRate():2);2>l&&(l=2);var k=0,h={},c=b.getWalker();return new function(){this.reset=function(){c.reset();k=0};this.moveNext=function(){if(!c.moveNext())return!1;h.s=k++;h.a=c.current().a+2*e*(Math.random()-.5);return!0};this.current=function(){return h};this.samplingRate=function(){return l}}}};WAVE.extend(c,WAVE.Walkable);return c}};f.signalConstSrc=function(a){function b(a){var d=
a.a||0,c=a.qty,e=a.r||2;2>e&&(e=2);var l=0,k={};this.reset=function(){l=0};this.moveNext=function(){if(c&&l>=c)return!1;k.s=l;k.a=d;l++;return!0};this.current=function(){return k};this.samplingRate=function(){return e}}a=a||{};var c={getWalker:function(){return new b(a)}};WAVE.extend(c,WAVE.Walkable);return c};f.arrayWalkable=function(a){var b=function(){var b=-1;this.reset=function(){b=-1};this.moveNext=function(){return++b<a.length};this.current=function(){return 0>b||b>=a.length?null:a[b]}},c=
{getWalker:function(){return new b},OriginalArray:a};WAVE.extend(c,WAVE.Walkable);return c};f.groupWalkable=function(a){var b=function(){var b=-1,d=null;this.reset=function(){b=-1;d=null};this.moveNext=function(){if(++b<a.length){var c=a[b];d={k:c.k,v:WAVE.arrayWalkable(c.v)};return!0}return!1};this.current=function(){return d}},c={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(c,WAVE.Walkable);return c};f.SVG=function(){var a={createCircle:function(b,c,e,l){l=l||{};l.cx=b;l.cy=c;
l.r=e;return a.createShape("circle",l)},createRect:function(b,c,e,l,h){h=h||{};h.x=b;h.y=c;h.width=e;h.height=l;return a.createShape("rect",h)},createLine:function(b,c,e,l,h){h=h||{};h.x1=b;h.y1=c;h.x2=e;h.y2=l;return a.createShape("line",h)},createPath:function(b){return a.createShape("path",b)},createText:function(b,c,e,l){l=l||{};l.x=c;l.y=e;c=a.createShape("text",l);b=document.createTextNode(b);c.appendChild(b);return c},createGroup:function(b){return a.createShape("g",b)},createMarker:function(a,
b){var c=this.createShape("marker",a),e;for(e in b)c.appendChild(b[e]);return c},createDefs:function(a){var b=this.createShape("defs"),c;for(c in a)b.appendChild(a[c]);return b},createUse:function(b,c,e){c=a.createShape("use",{x:c,y:e});c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return c},createClipPath:function(b,c,e){e=e||{};e.id=b;b=a.createShape("clipPath",e);for(var l in c)b.appendChild(c[l]);return b},createShape:function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",
a),e;for(e in b)try{c.setAttribute(e,b[e])}catch(l){console.error(l)}return c}};return a}();return f}();
WAVE.RecordModel=function(){var g={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",EVT_RECORD_LOAD:"record-load",
EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",
KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm"},n=[];g.records=function(){return WAVE.arrayShallowCopy(n)};g.isDirty=function(){for(var g in n)if(n[g].isGUIModified())return!0;return!1};g.Record=function(p,f){if(!p)throw"Record.ctor(need id+fieldFunc or initObject)";var v=this,t=!1;WAVE.extend(v,
WAVE.EventManager);this.eventInvoke(g.EVT_RECORD_LOAD,g.EVT_PHASE_BEFORE);var x=null,r=null,e="unspecified",b="";WAVE.isObject(p)&&p.fields?(x=p.ID,r=p.ISOLang,p.__FormMode&&(e=p.__FormMode),p.__CSRFToken&&(b=p.__CSRFToken)):(x=p.toString(),p=null);var l=WAVE.strEmpty(x)?WAVE.genRndKey(16):x,c=WAVE.strEmpty(r)?"eng":r,y=[],h=!1,m=null;this.ID=function(){return l};this.ISOLang=function(){return c};this.formMode=function(){return e};this.csrfToken=function(){return b};this.loaded=function(){return t};
this.fields=function(){return WAVE.arrayShallowCopy(y)};this.data=function(a,c){var l={},h;for(h in y){var m=y[h];a&&!m.isModified()&&!m.isGUIModified()||!c&&!m.stored()||(l[m.name()]=m.value())}WAVE.strEmpty(e)||"unspecified"===e||(l.__FormMode=e);WAVE.strEmpty(b)||(l.__CSRFToken=b);return l};this.fieldByName=function(a){if(WAVE.strEmpty(a))return null;for(var b in y){var c=y[b];if(WAVE.strSame(c.name(),a))return c}return null};this.allValidationErrors=function(){var a=[];null!==m&&a.push(m);for(var b in y){var c=
y[b].validationError();null!==c&&a.push(c)}return a};this.allValidationErrorStrings=function(){var a="",b=this.allValidationErrors(),c;for(c in b)a+=b[c].toString()+"\n";return a};this.validate=function(){h=!1;m=null;var a=h=!0,b;for(b in y)y[b].validate()||(a=!1);if(a)try{v.eventInvoke(g.EVT_VALIDATE)}catch(c){m=c,a=!1}v.eventInvoke(g.EVT_VALIDATED);return a};this.validated=function(){return h};this.validationError=function(){return m};this.valid=function(){return h&&null===m&&this.fieldsValid()};
this.fieldsValidated=function(){for(var a in y)if(!y[a].validated())return!1;return!0};this.fieldsValid=function(){for(var a in y)if(!y[a].valid())return!1;return!0};this.isModified=function(){for(var a in y)if(y[a].isModified())return!0;return!1};this.isGUIModified=function(){for(var a in y)if(y[a].isGUIModified())return!0;return!1};this.resetModified=function(){for(var a in y){var b=y[a];b.resetModified();b.resetGUIModified()}return!1};this.resetSchema=function(){for(var a in y)y[a].resetSchema()};
this.applyDefaultValue=function(a){for(var b in y)y[b].applyDefaultValue(a)};this.latchAllEvents=function(a){this.eventInvocationSuspendCount+=a;for(var b in y)y[b].eventInvocationSuspendCount+=a};this.resetRecord=function(a){a&&v.latchAllEvents(1);try{h=!1,m=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{a&&v.latchAllEvents(-1)}for(var b in y)a=y[b],a.eventInvoke(g.EVT_FIELD_RESET,a)};this.Field=function(a){function b(){h=!1;m=null;z=!1;P=null}function c(a,b){v.eventInvoke(g.EVT_VALIDATION_DEFINITION_CHANGE,
r,a,b);r.eventInvoke(g.EVT_VALIDATION_DEFINITION_CHANGE,a,b)}function e(a,b){v.eventInvoke(g.EVT_INTERACTION_CHANGE,r,a,b);r.eventInvoke(g.EVT_INTERACTION_CHANGE,a,b)}var l=!1;if(!WAVE.isObject(a))throw"Field.ctor(fieldDef must be a map)";if(WAVE.strEmpty(a.Name))throw"Field def must have a name";if(WAVE.strEmpty(a.Type))throw"Field def must have a type";var r=this;WAVE.extend(r,WAVE.EventManager);y.push(r);var n="fld"+a.Name;v[n]=r;v.eventInvoke(g.EVT_FIELD_LOAD,r,g.EVT_PHASE_BEFORE);WAVE.propStrAsObject(a,
"LookupDict");WAVE.propStrAsObject(a,"Lookup");var f=WAVE.clone(a);WAVE.extend(f,g.FIELDDEF_DEFAULTS,!0);var w=null,C=!1,p=!1,z=!1,P=null;this.record=function(){return v};this.loaded=function(){return l};this.drop=function(){if(!v[n])return!1;this.eventInvoke(g.EVT_FIELD_DROP,g.EVT_PHASE_BEFORE);v.eventInvoke(g.EVT_FIELD_DROP,r,g.EVT_PHASE_BEFORE);WAVE.arrayDelete(y,this);delete v[n];v.eventInvoke(g.EVT_FIELD_DROP,r,g.EVT_PHASE_AFTER);this.eventInvoke(g.EVT_FIELD_DROP,g.EVT_PHASE_AFTER);return!0};
this.schemaDef=function(){return a};this.name=function(){return f.Name};this.type=function(){return f.Type};this.isTypeLogical=function(){return WAVE.strOneOf(f.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(f.LookupDict).length};this.key=function(){return f.Key};this.stored=function(){return f.Stored};this.about=function(){var a=f.Description;WAVE.strEmpty(a)&&(a=f.Name);return a};this.inferControlType=function(){return this.isTypeLogical()?g.CTL_TP_CHECK:this.isLookupDict()?
4<Object.keys(f.LookupDict).length?g.CTL_TP_COMBO:g.CTL_TP_RADIO:50<f.Size?g.CTL_TP_TEXTAREA:g.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=f.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[g.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){f=WAVE.clone(a);WAVE.extend(f,g.FIELDDEF_DEFAULTS,!0);b();c(null,null);e(null,null)};this.validate=function(){function a(b,c){return WAVE.strTemplate(WAVE.strLocalize(v.ISOLang(),"RMField","error",
b),c)}z=!0;P=null;try{if(f.Required&&(null===w||WAVE.strEmpty(w.toString())))throw a("Field '@f@' must have a value",{f:this.about()});if(null!==w&&!WAVE.strEmpty(w.toString())){var b=f.MinValue;if(null!==b)try{if(w<b)throw 1;}catch(c){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var d=f.MaxValue;if(null!==d)try{if(w>d)throw 1;}catch(c){throw a("Field '@f@' value can not be greater than '@b@'",{f:this.about(),b:d});}var e=f.Size;if(null!==e&&0<e&&w.toString().length>
e)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:e});e=f.MinSize;if(null!==e&&0<e&&w.toString().length<e)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:e});var l=Object.keys(f.LookupDict);if(0<l.length){var h=WAVE.convertScalarType(!1,w,"string","<unconvertible>");if(!WAVE.strOneOf(h,l))throw a("Field '@f@' value '@v@' is not allowed",{f:this.about(),v:h});}if(f.Kind===g.KIND_EMAIL&&!WAVE.strIsEMail(w))throw a("Field '@f@' must be a valid e-mail address",
{f:this.about()});if(f.Kind===g.KIND_SCREENNAME&&!WAVE.strIsScreenName(w))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}r.eventInvoke(g.EVT_VALIDATE)}catch(c){P=c}r.eventInvoke(g.EVT_VALIDATED);return null===P};this.validationError=function(){return P};this.setExternalValidationError=function(a){null!==a&&(P=a,z=!1)};this.required=function(a){if("undefined"===typeof a||a===f.Required)return f.Required;f.Required=
a;b();c("required",a)};this.value=function(a,c){if("undefined"===typeof a)return w;var d=w,e=WAVE.convertScalarType(!0,a,f.Type,f.DefaultValue),l=WAVE.isSame(d,e);if(c)var h=e,e=this.preProcessValueFromGUI(e),l=l&&WAVE.isSame(h,e);if(l)return w;v.eventInvoke(g.EVT_DATA_CHANGE,g.EVT_PHASE_BEFORE,r,d,e);this.eventInvoke(g.EVT_DATA_CHANGE,g.EVT_PHASE_BEFORE,d,e);w=e;C=!0;c&&(p=!0);f.DeferValidation?b():this.validate();this.eventInvoke(g.EVT_DATA_CHANGE,g.EVT_PHASE_AFTER,d,e);v.eventInvoke(g.EVT_DATA_CHANGE,
g.EVT_PHASE_AFTER,r,d,e);return w};this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),f.Kind===g.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),f.Case===g.CASE_UPPER?a=a.toUpperCase():f.Case===g.CASE_LOWER?a=a.toLowerCase():f.Case===g.CASE_CAPS?a=WAVE.strCaps(a,!1):f.Case===g.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));return a};this.isNull=function(){return null===w};this.displayValue=function(){return null===w?"":WAVE.isDateType(f.Type)?f.Kind===g.KIND_DATE?
WAVE.toUSDateString(w):WAVE.toUSDateTimeString(w):w.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(f.DefaultValue);return w};this.valid=function(){return null===P};this.validated=function(){return z};this.validationError=function(){return P};this.isModified=function(){return C};this.resetModified=function(){var a=C;C=!1;e("modified",!1);return a};this.isGUIModified=function(){return p};this.resetGUIModified=function(){var a=
p;p=!1;e("guimodified",!1);return a};this.isEnabled=function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===f.Kind)return f.Kind;f.Kind=a;e("kind",a)};this.case=function(a){if("undefined"===typeof a||a===f.Case)return f.Case;f.Case=a;WAVE.isStringType(f.Type)&&this.value(w,!1)};this.applicable=function(a){if("undefined"===typeof a||a===f.Applicable)return f.Applicable;f.Applicable=a;e("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||
a===f.Enabled)return f.Enabled;f.Enabled=a;e("enabled",a)};this.readonly=function(a){if("undefined"===typeof a||a===f.ReadOnly)return f.ReadOnly;f.ReadOnly=a;e("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===f.Visible)return f.Visible;f.Visible=a;e("visible",a)};this.password=function(a){if("undefined"===typeof a||a===f.Password)return f.Password;f.Password=a;e("password",a)};this.deferValidation=function(a){if("undefined"===typeof a||a===f.DeferValidation)return f.DeferValidation;
f.DeferValidation=a;b();c("defervalidation",a)};this.minValue=function(a){if("undefined"===typeof a||a===f.MinValue)return f.MinValue;f.MinValue=a;b();c("minvalue",a)};this.maxValue=function(a){if("undefined"===typeof a||a===f.MaxValue)return f.MaxValue;f.MaxValue=a;b();c("maxvalue",a)};this.minSize=function(a){if("undefined"===typeof a||a===f.MinSize)return f.MinSize;f.MinSize=a;b();c("minsize",a)};this.size=function(a){if("undefined"===typeof a||a===f.Size)return f.Size;f.Size=a;b();c("size",a)};
this.controlType=function(a){if("undefined"===typeof a||a===f.ControlType)return f.ControlType;f.ControlType=a;e("controltype",a)};this.defaultValue=function(a){if("undefined"===typeof a||a===f.DefaultValue)return f.DefaultValue;f.DefaultValue=a;b();c("defaultvalue",a)};this.lookupDict=function(a){if("undefined"===typeof a)return f.LookupDict;null===a&&(a={});if(WAVE.isSame(f.DefaultValue,a))return f.LookupDict;f.LookupDict=a;b();c("lookupDict",a)};this.hint=function(a){if("undefined"===typeof a||
a===f.Hint)return f.Hint;f.Hint=a;e("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===f.Marked)return f.Marked;f.Marked=a;e("marked",a)};this.description=function(a){if("undefined"===typeof a||a===f.Description)return f.Description;f.Description=a;e("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===f.Placeholder)return f.Placeholder;f.Placeholder=a;e("placeholder",a)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+
"')"};l=!0;v.eventInvoke(g.EVT_FIELD_LOAD,r,g.EVT_PHASE_AFTER)};if(p)for(var a in p.fields)x=p.fields[a],r=new this.Field(x.def),x.hasOwnProperty("val")&&r.value(x.val),x.hasOwnProperty("errorText")&&r.setExternalValidationError(x.errorText),r.resetModified();else WAVE.isFunction(f)&&f.apply(v);t=!0;n.push(this);this.eventInvoke(g.EVT_RECORD_LOAD,g.EVT_PHASE_AFTER)};g.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};g.DATA_RECVIEW_ID_ATTR="data-wv-rid";g.DATA_FIELD_NAME_ATTR="data-wv-fname";
g.DATA_CTL_TP_ATTR="data-wv-ctl";g.RecordView=function(n,f,v,t){if(WAVE.strEmpty(n))throw"RecordView.ctor(id: must specify)";if(!WAVE.isObject(f))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(v)||(v=WAVE.RecordModel.GUI);var x=v,r=this,e=[],b=null;this.ID=function(){return n};this.record=function(){return f};this.gui=function(){return x};this.rootElement=function(){return b};this.destroyViews=function(){for(;0<e.length;)e[0].destroy()};var l=null;this.buildViews=function(){b=null;this.destroyViews();
for(var c=document.getElementsByTagName("form"),e=0,h=c.length;e<h;e++){var m=c[e],a=m.getAttribute(g.DATA_RECVIEW_ID_ATTR);if(WAVE.strSame(n,a)){b=m;break}}if(null===b)for(c=document.getElementsByTagName("div"),e=0,h=c.length;e<h;e++)if(m=c[e],a=m.getAttribute(g.DATA_RECVIEW_ID_ATTR),WAVE.strSame(n,a)){b=m;break}if(null===b)throw"No 'form' or 'div' element could be found with record binding '"+g.DATA_RECVIEW_ID_ATTR+"' annotation";c=WAVE.arrayShallowCopy(b.getElementsByTagName("div"));e=0;for(h=
c.length;e<h;e++)m=c[e],a=m.getAttribute(g.DATA_FIELD_NAME_ATTR),WAVE.strEmpty(a)||(a=f.fieldByName(a),null!==a&&new this.FieldView(m,a));WAVE.strEmpty(f.formMode())&&WAVE.strEmpty(f.csrfToken())||(null===l&&(l=document.createElement("div"),l.style.display="none",b.appendChild(l)),c="",WAVE.strEmpty(f.formMode())||(c+="<input type='hidden' name='__FormMode' value='"+f.formMode()+"'>"),WAVE.strEmpty(f.csrfToken())||(c+="<input type='hidden' name='__CSRFToken' value='"+f.csrfToken()+"'>"),l.innerHTML=
c)};this.views=function(){return WAVE.arrayShallowCopy(e)};this.FieldView=function(b,l){if(!b)throw"FieldView.ctor(div: element must be passed)";if(!WAVE.isObject(l))throw"FieldView.ctor(fld: must be Record.Field)";var h=this;e.push(h);l.eventSinkBind(this);var m="fld"+l.name();r[m]=h;this.eventNotify=function(a,d,e){WAVE.strOneOf(a,[WAVE.RecordModel.EVT_DATA_CHANGE,WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===
typeof e&&(e=""),e!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(b.style.visibility=l.visible()?"visible":"hidden",x.eventNotifyFieldView(h,a,d,e)))};this.destroy=function(){b.innerHTML="";l.eventSinkUnbind(this);WAVE.arrayDelete(e,this);delete r[m]};this.recView=function(){return r};this.field=function(){return l};this.DIV=function(){return b};this.getOrInferControlType=function(){var a=b.getAttribute(g.DATA_CTL_TP_ATTR);return WAVE.strEmpty(a)?l.getOrInferControlType():a};l.visible()&&x.buildFieldViewAnew(this)};
t||this.buildViews()};return g}();
WAVE.Pay=function(){var g={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"American Express",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Unknown"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,
CARD_DECLINED:9,MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(g,p,f){if(WAVE.strEmpty(g))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(f))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var v=this;this.providerName=function(){return g};WAVE.extend(v,WAVE.EventManager);try{p.initialize(f)}catch(t){throw new WAVE.Pay.ProviderInitError(t);
}this.tokenize=function(g,f){if(WAVE.strEmpty(g))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(f))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{p.tokenize(v,g,f)}catch(r){throw new WAVE.Pay.TokenizeError(r);}}},RequiredArgumentError:function(g,p,f){this.name="RequiredArgumentError";this.message=g+" requires argument '"+p+"'";this.inner=f}};g.RequiredArgumentError.prototype=Error.prototype;g.ProviderInitError=function(g){this.name="ProviderInitError";
var p="Critical error during provider setup";"undefined"===typeof g||WAVE.strEmpty(g.message)||(p+=": "+g.message);this.message=p;this.inner=g};g.ProviderInitError.prototype=Error.prototype;g.TokenizeError=function(g){this.name="TokenizeError";var p="Critical error during tokenization";"undefined"===typeof g||WAVE.strEmpty(g.message)||(p+=": "+g.message);this.message=p;this.inner=g};g.TokenizeError.prototype=Error.prototype;g.CardValidationError=function(g){this.name="CardValidationError";var p="Card is invalud";
"undefined"===typeof g||WAVE.strEmpty(g.message)||(p+=": "+g.message);this.message=p;this.inner=g};g.CardValidationError.prototype=Error.prototype;g.validateCardNumber=function(n){if(WAVE.strEmpty(n))return!1;n=n.replace(/\s+|-/g,"");return 10<=n.length&&16>=n.length&&g.checkLuhn(n)};g.checkLuhn=function(g){if(WAVE.strEmpty(g))return!1;var p=0,f=0,v=!1;g=g.replace(/\D/g,"");for(var t=g.length-1;0<=t;t--)f=g.charAt(t),f=parseInt(f,10),v&&9<(f*=2)&&(f-=9),p+=f,v=!v;return 0===p%10};g.validateCVC=function(g){return WAVE.strEmpty(g)?
!1:3<=g.length&&4>=g.length&&/^\d+$/.test(g)};g.validateExpirationDate=function(g,p){if(WAVE.strEmpty(g)||WAVE.strEmpty(p))return!1;2===p.length&&(p="20"+p);return/^\d+$/.test(g)&&/^\d+$/.test(p)&&1<=g&&12>=g&&4===p.length&&2015<p};g.getCardBrand=function(n){return WAVE.strEmpty(n)||!/^\d{2}/.test(n)?g.Brands.UNKNOWN:/^4/.test(n)?g.Brands.VISA:/^5[1-5]/.test(n)?g.Brands.MASTER_CARD:/^3[47]/.test(n)?g.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(n)?
g.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(n)?g.Brands.JCB:/^3[0689]/.test(n)?g.Brands.DINERS_CLUB:g.Brands.UNKNOWN};return g}();WAVE.GUI=function(){var g={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_TITLE:"wvDialogTitle",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_FOOTER:"wvConfirmDialogFooter",CLS_DIALOG_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",
CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",
EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,IBOX_DIV_FRAME:"wvIBoxDivFrame",IBOX_DIV_MAINIMAGE:"wvIBoxDivMainImage",IBOX_IMG_MAINIMAGE:"wvIBoxImgMainImage",IBOX_DIV_THUMBSCONTAINER:"wvIBoxDivThumbsContainer",IBOX_DIV_THUMBSNAVIGATION:"wvIBoxDivThumbsNavigation",IBOX_DIV_THUMBSIMAGESCONTAINER:"wvIBoxDivThumbsImagesContainer",IBOX_DIV_THUMB:"wvIBoxDivThumb",
IBOX_DIV_THUMB_CROP:"wvIBoxDivThumbCrop",IBOX_DIV_THUMB_IMAGE:"wvIBoxDivThumbImage",STYLE_DIV_FRAME:"",STYLE_IMG_MAINIMAGE:"position: relative;",STYLE_DIV_MAINIMAGE_V:"width: 72%;height: 100%;margin: 0 1%;overflow: hidden;",STYLE_DIV_MAINIMAGE_H:"width: 100%;height: 74%;margin: 1% 0;overflow: hidden;",STYLE_DIV_THUMBSCONTAINER_V:"width: 25%;height: 100%;",STYLE_DIV_THUMBSCONTAINER_H:"width: 100%;height: 25%;",STYLE_DIV_THUMBSNAV_V:"width: 100%;height: 5%;display: none;",STYLE_DIV_THUMBSNAV_H:"width: 5%;height: 100%;display: none;",
STYLE_IMG_THUMBSNAV:"display: block;position: relative;",STYLE_DIV_THUMBSIMAGESCONTAINER_V:"width: 100%;height: 100%;overflow: hidden;",STYLE_DIV_THUMBSIMAGESCONTAINER_H:"width: 100%;height: 100%;overflow: hidden;display: inline-block;white-space: nowrap; vertical-align: top;",STYLE_DIV_THUMB_V:"width: 100%;margin: 3px 0;",STYLE_DIV_THUMB_H:"height: 100%;margin: 0 3px;display: inline-block;vertical-align: top;",STYLE_DIV_THUMB_CROP:"overflow: hidden;position:relative;",STYLE_DIV_THUMB_IMAGE:"position: relative;",
STYLE_DISABLE_MOBILE_HANDLING:"-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;",EVT_IMAGE_CHANGED:"image-changed",POS_LEFT:"left",POS_RIGHT:"right",POS_TOP:"top",POS_BOTTOM:"bottom",DEFAULT_THUMBS_POSITION:"left",DEFAULT_IMAGE_FADEIN_TIME:500,DEFAULT_IMAGE_FADEOUT_TIME:0,DEFAULT_THUMBS_SCROLL_DELTA:.5,DEFAULT_ARROWS_OPACITY:.3,DEFAULT_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAPDw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL+bwigAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAAJcEhZcwAAFiQAABYkAZsVxhQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNvyMY98AABAiSURBVHhe7dfreuM6rkXR7vd/6NqOM1NlJ76QEgAyWGv86sgSUKLm6a/P//6YNAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByBOO4D/f+A/i5IO4Pr9xQtQDoDvr12AcAB8/Q9cUSQbAJ/+C1f1qAbAd/+H63JEA+Cr3+IXNZoB8M3v8ZsYyQD44t/xqxbFAPjeP/G7FMEA+NqPcIcSvQD41o9xjxC5APjSz3CXDrEA+MyvcKcKrQD4xq9xrwipAPjC73C3BqUA+L7vcb8EoQD4uiN4QoFOAHzbMTwjQCYAvuwonupPJQC+6ziea08kAL7qDJ7sTiMAvukcnm1OIgC+6Cye7k0hAL7nPJ5vTSAAvuYRTOisfwB8y2OY0ZgDeIkZjbUPgC95FFP66h4A3/E45rTVPAC+4hlM6qp3AHzDc5jVlAN4i1lNtQ6AL3gW03rqHADf7zzmteQABjCvpcYB8PUiMLGjvgHw7WIwsyEHMISZDbUNgC8Xhan9dA2A7xaHue04gEHMbadpAHy1SEzuxgGMYnI3DmAUk7txAKOY3E3PAPhmsZjdjAMYxuxmHMAwZjfTMgC+WDSm9+IAxjG9Fwcwjum9dAyA7xWP+a04gAnMb8UBTGB+Kw5gAvNbaRgAXysDGzpxADPY0IkDmMGGThzADDZ04gBmsKETBzCDDZ04gBls6KRfAHyrHOxoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaMQBTGFHIw5gCjsacQBT2NHIVgFwyjf4YQZP5mDHDJ68wQ972CQAjuYJbhrDMznYMYZnnuCm1dYHwHm8xe1vcXsOdrzF7W9x+0KLA+AcBvHQa9ybgx2vce8gHlplZQCcwBQefYU7M7DhFe6cwqNLLAuAdz+AAU9xWwY2PMVtBzCg3poAeOujmPIEN2VgwxPcdBRTii0IgPc9h1mPcEcGNjzCHecwq1J5ALzqaYx7gBsysOEBbjiNcXVqA+AtYzDzB37OwIYf+DkGM4sUBsD7BWLwN/yYgQ3f8GMgBleoCoA3i8b0e/wWj/n3+C0a09PVBMBLJWDBHX6Kx/w7/JSABclKAuCNcrDjBj/EY/4NfsjBjly/P4Cf58T1eMz/h+tJWJKrIgDeJw97/uJyNKb/xeU87EnVIoDvJ8XVaEz/wtVELErVI4BvR8XFaEwHFzOxKVWTAO7PimvRmP6Ja6lYlarB/wj8xKpPXIvF7E9cS8WqXG0CuDsuLsVi9hWXcrErV58Asj8Qk6+4lIxluRoFcHtgXInE5A9cyca2XJ0CuDkxLkRi8gUX0rEuV0kAHQpg7gUX0rEuWa8A/h0af8dh7op3SdUsgLTvxNQlr5KqWwB/j40/ozB1xZvkahtA7E5mOoCjeKcKbMwJgD8rsDFbvwAyPhYTl7xGMgcwgokO4DBeqgY745Yyb81bJCsKYMnZ8dd50fNGsDNd5wCiljLNAZzBaxWJXRo7bRBL07UOIGYrsxzAKbxWFbZGrGXSqjfIVhXAov/74c8zmLToBdI1DSDuszFn1b8/XfcAzu5ligM4jRcrw9qTi5mx8J+fzQG8xAwHEIA3K8PaU4uZ0Pj7KwRwfDPPX3ChDGsLKARwdDVPf+BKGdYWqAtgswL45QtXb/HLB66UYW0FjQDudnPpEe644tIVl8qwtoJIAF/L+euVR3dyrQxrK6gE8LGd//Teo4dLsbZCYQC/9xiZV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWqAyg+iDZeh7zqrC1RucAok6SaWVYW8MBvMe0MqytURrAL/3vUqZVYWuRzgGw9DzmFWFpkdoAKo+SjTGYWYGNVdoGwMIoTC3AwirFAZQdJOviMDcd68o0DYBtkZicjW1lqgOoOUd2xWJ2LnbVaRkAq6IxPRWr6pQHUHCMLIrH/EQsKtQwAPZkYEMe9hSqDyD9FFmTgQ1pWFOpXwBsycGOLGyptCCA3FNkRxa25GBHqRUBZJ4iG/KwJwMbai0JIPEUWZCHPQlYUKxZAMzPxKZ4zC+2JoCsU2R6LnZFY3q1RQEknSLDc7ErGMPLrQog5RgZnY1toRhdb1kAGcfI5Gxsi8TkBdYFEH+OzM3HvjjMXWFhAOHnyNh87AvD2CVWBhB8kAytwMYgDF1jaQCxB8nMCmyMwcxF1gYQeZJMrMHOCExcZXEAgSfJwBrsDMDAZVYHEHeUzKvBzvOYt87yAKLOkmlV2HoW0xZaH0DQYTKrClvPYdZSOwQQcZpMqsPeM5i01hYBBBwnc+qw9zjmrLZJAKfPkzF12HsYY5bbJYCzJ8qQOuw9iCEb2CeAU2fKhEpsPoIJW9gpgBNnyoBKbD6AAXvYKoDjp8rjldg8jcd3sVkAF5zTHJ6txOY5PLuR/QI4dLQ8WYnNM3hyKzsGcMGJDeOxSmwexmO72TSAC85tDM9UYvMYntnQvgFccHrvcX8tdr/H/XvaOoArTvEJblqHf8cT3LSx/QP4xIHe4Ic98G+6wQ/b+y0BWBIHIM4BiHMA4hyAOAcg7rcEwP9zdYMf9sC/6QY/bG//ADjQJ7hpHf4dT3DTxrYOgFN8j/trsfs97t/TvgFwemN4phKbx/DMhjYNgHMbxmOV2DyMx3azYwCc2AyerMTmGTy5lf0C4LDm8GwlNs/h2Y1sFgDnNI3HK7F5Go/vYqsAOKIDGFCJzQcwYA87BcD5HMGESmw+gglb2CcADucghtRh70EM2cAuAXAwhzGmDnsPY8xymwTAqRzHnDrsPY45q20RAEdyBpPqsPcMJq21QwCcxznMqsLWc5i11PoAOIyzmFaFrWcxbaHlAXAS5zGvBjvPY946qwPgHAIwsAY7AzBwmcUBcAoRmFiDnRGYuMraADiDGMyswMYYzFxkaQCcQBCGVmBjEIausTIA3j8MY/OxLwxjl1gYAG8fh7n52BeHuSusC4B3j8TkbGyLxOQFlgXAm4didDa2hWJ0vVUB8N7BGJ6LXcEYXm5RALx1NKbnYlc0pldbEwDvHI/5mdgUj/nFmgWQf4rsScCCYksC4I0zsCEPezKwodaKAHjfHOzIwpYc7Ci1IADeNgtbcrAjC1sq9Qsg8xTZkIY1leoD4F3zsCcDG/Kwp1DDAPJOkfmJWFSoPADeNBWrojE9FavqtAwg5xiZnYtddaoD4D2zsS0Sk7OxrUzTAOLPkbnpWFemOADesgALozC1AAurtA0g9iCZWYGNVWoD4B2LsPQ85hVhaZHOAUQdJdOqsLVIaQC8YRnWnsW0Mqyt4QDeY1oZ1tboHABbz2NeFbbWqAyA9yvD2vOYV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWKAyAtyvDWvy48MKjh0uxtoJKAI+uPfboTq6VYW0FkQC4dMWlR7jjiktXXCrD2goaAXDlFr984eotfvnAlTKsrVAXAO9WhrUfuDKLpz9wpQxrCygEwIV5PH/BhTKsLSAQAH8fwQQHEIA3K8Pak4uZ0bgAB/ASMxzAebxYFbae3suUdf/+bN0D4M/jmOMAzuLFirA0YiuTFr1AuqoAeK8qbP29AZQV0DMAlsZsZdaiV8jWOgD+Oit22iCWpmsZADuDA1jzDtk6B8Bf50XPG8HOdEUB8FY12BkeQMsCGgbAysidTFzyGskcwAgmOoDDeKkKbIxdycwV75GsJgDeqQIbkwLoV0DbAPgzClMdwDG8UgEWpgWw4lVSNQuAfQkbmbviXVL1CoB1F1yIw9wLLqRjXbKSAHijdKy74EIkJl9wIR3rcnUKgG0fuBKJyR+4ko1tuRoFwLIrLkVi8hWXkrEsV58A2HXFpVjMvuJSLnblahMAqz5xLRazP3EtFatyVQTA+6Ri1SeuRWP6J66lYlWqJgGwCVyMxnRwMRObUvUIgEVfuBqN6V+4mohFqVoEwJ6/uByN6X9xOQ97UjX4H4Es+Yfr8Zj/D9eTsCTX7w+AHTf4IR7zb/BDDnbkKgkg8ZxYcIef4jH/Dj8lYEGymgDSzonp9/gtHvPv8Vs0pqerCuCCNwvE4G/4MQMbvuHHQAyuUBjABe8Xg5k/8HMGNvzAzzGYWaQ2gAve8jTGPcANGdjwADecxrg65QEEnRWzHuGODGx4hDvOYValBQFc8L5HMeUJbsrAhie46SimFFsTwAVvfQADnuK2DGx4itsOYEC9ZQFc8O5TePQV7szAhle4cwqPLrEygAtOYBAPvca9OdjxGvcO4qFVFgdwwTm8xe1vcXsOdrzF7W9x+0LrA7jiPJ7gpjE8k4MdY3jmCW5abZMAPnE0N/hhBk/mYMcMnrzBD3vYKoAQnHIOdjTiAKawoxEHMIUdjTiAKexoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaKRfAJkFsKETBzCDDZ04gBls6MQBzGBDJw5gBhs6cQAz2NCJA5jBhk4aBpBXAPNbcQATmN+KA5jA/FYcwATmt9IxgKwCmN6LAxjH9F4cwDim99IygJwCmN2MAxjG7GYcwDBmN9MzgIwCmNyNAxjF5G4cwCgmd+MARjG5m6YBxBfA3HYcwCDmttM1gOgCmNpP2wBiC2BmQw5gCDMb6htAZAFM7KhxAHEFMK8lBzCAeS11DiCqAKb11DqAmAKY1ZQDeItZTfUOIKIAJnXVPIDzBTCnre4BnC2AKX21D+BcAcxozAG8xIzG+gdwpgAmdCYQwPECeL41hQCOFsDTvUkEcKwAnm1OI4AjBfBkdyIBzBfAc+2pBDBbAE/1JxPAXAE8I0AngJkCeEKBUADjBXC/BKUARgvgbg1SAYwVwL0itAIYKYA7VYgF8DYB7tIhF8DrArhHiF4ArwrgDiWCATwvgN+lKAbwrAB+1SIZwOMC+E2MZgCPCuAXNaIB/CyA63JUA/heAFf1yAZwlwBXFAkH8K8A/pakHMBXAfylSTqAzwL4z6K0AzAHoM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcg7c+f/wCx0c2+VmqfPgAAAABJRU5ErkJggg==",
DEFAULT_UP_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIlJREFUSEu9zlsOgCAQQ1EXxv63NQaTSYZ6QV7ycT6s0HKZ2bSUkmWaj8Cwh4+vPgLDLzru9FwPDFtoONLzXzCsoUGi91owJDTUovdrMFQ00EN7CIYRFY/QPoWho8IZ2hthmFHRCu13GFLBDrqTvQK6uJPuFR904Q9x8/i4Kx5AB054HkA/zkl2A3fzm51wX0ZlAAAAAElFTkSuQmCC",DEFAULT_DOWN_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIxJREFUSEvFzkEOgCAMRFEOxv2vVVOTGhi/gIJh8RZMaKcp52w7JTPbdoR3nwfsOCJ6rwMcffxD2Vkd4GhgJe2rHoEGV9AedwsCLZih+wOGgRZ9oXtLGJZo4Ru6T2GoaPEI3UMwJFTQovNPMHxCRUTnWjBsocKS/u/BsIeKnf4bgeGIFeUOw1Gz5WaWDtsHm52ye7DmAAAAAElFTkSuQmCC",
DEFAULT_LEFT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIZJREFUSEut0EEKxEAIRNE5mPe/lqEWgjE/kLZm8VbtL0h+mbkWEfzwheL1QMWrgR4fD8z4aIBiweOJwoJBR1GHUaFgwlDomFixWLFYsVixWLFYsfgD9if85Sc6I7eBzchj4HQEB4SOCcaFggnDjqIOo4nCggGhWPD4jT0g9oDYA2IPSETkBTnKm53Tz5HlAAAAAElFTkSuQmCC",DEFAULT_RIGHT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJVJREFUSEvFz0sOgCAQBFEOxv2vpbYJBEo+w8xCk9ro9EtMOefreZK3F4ggFfAiHeBBPsApMgQUD2dNAcXjUUtAccC2gOKozQQoDktmQHGsjgAVBlQYUGFAhQH1LxD6BY3dQBm7gHZ8DHCszACHJRPAUdsW4IAtAR6PmgI8nDUEeLTqA/BgVwfwo6UK8IO1F+BLe1e6AdOmm5054q0eAAAAAElFTkSuQmCC",
PARAM_THUMBS_POSITION:"thumbsPosition",PARAM_DEF_IMG_SRC:"defaultImageSrc",PARAM_DEF_THUMB_SRC:"defaultThumbSrc",PARAM_THUMBS:"thumbs",PARAM_BIG_IMG_SRC:"bigSrc",PARAM_THUMB_IMG_SRC:"thumbSrc",PARAM_HEIGHT:"h",PARAM_WIDTH:"w",PARAM_LEFT:"l",PARAM_TOP:"t",PARAM_THUMB_IMAGE_HEIGHT:"thumbImageHeight",PARAM_THUMB_IMAGE_WIDTH:"thumbImageWidth",PARAM_IMAGES_LIST:"images",PARAM_THUMB_TITLE:"title",PARAM_THUMBS_SCROLL_DELTA:"thumbsScrollDelta",CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor"},n=0;g.toast=
function(b,e,c){var f={};WAVE.intValidPositive(c)||(c=2500);var h=document.createElement("div");e=WAVE.strEmpty(e)?"":"_"+e;h.className=g.CLS_TOAST+e;h.style.zIndex=1E6;h.innerHTML=b;h.style.left=0;document.body.appendChild(h);b=Math.round(h.offsetWidth/2);h.style.left="50%";h.style.marginLeft=-b+"px";n++;1<n&&(h.style.marginLeft=-(b+4*n)+"px",h.style.marginTop=-(4*n)+"px");var m=!1;f.close=function(){if(m)return!1;document.body.removeChild(h);n--;return m=!0};f.closed=function(){return m};setTimeout(function(){f.close()},
c);return f};var p=[];g.curtainOn=function(){var b=document.createElement("div");b.style.backgroundColor="rgba(127,127,127,0.45)";b.className=g.CLS_CURTAIN;b.style.position="fixed";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";b.style.zIndex=5E5+p.length;document.body.appendChild(b);p.push(b)};g.curtainOff=function(){if(0!==p.length){var b=p[p.length-1];"undefined"!==typeof b.__DIALOG?b.__DIALOG.cancel():(document.body.removeChild(b),WAVE.arrayDelete(p,b))}};g.isCurtain=
function(){return 0<p.length};g.currentDialog=function(){for(var b=p.length-1;0<=b;b--)if("undefined"!==typeof p[b].__DIALOG)return p[b].__DIALOG;return null};g.Dialog=function(b){function e(){var b=$(window).width(),c=$(window).height(),d=0===m?h.offsetWidth:Math.round(m/100*b),l=0===a?h.offsetHeight:Math.round(a/100*c);h.style.left=Math.round(b/2-d/2)+"px";h.style.top=Math.round(c/2-l/2)+"px";h.style.width=0===m?"auto":d+"px";h.style.height=0===a?"auto":l+"px";k.style.height=0===m?"auto":l-(k.offsetTop+
k.offsetLeft)+"px"}WAVE.isObject(b)||(b={});var c=WAVE.isFunction(b.onShow)?b.onShow:function(){},f=WAVE.isFunction(b.onClose)?b.onClose:function(){return!0};WAVE.extend(this,WAVE.EventManager);g.curtainOn();var h=document.createElement("div");h.__DIALOG=this;h.className=g.CLS_DIALOG_BASE+" "+WAVE.strDefault(b.cls);h.style.position="fixed";h.style.zIndex=5E5+p.length;var m=WAVE.intValidPositive(b.widthpct)?b.widthpct:0,a=WAVE.intValidPositive(b.heightpct)?b.heightpct:0;100<m&&(m=100);100<a&&(a=100);
document.body.appendChild(h);p.push(h);var d=document.createElement("div");d.className=g.CLS_DIALOG_TITLE;d.innerHTML=WAVE.strDefault(b.title,"Dialog");h.appendChild(d);var k=document.createElement("div");k.className=g.CLS_DIALOG_CONTENT;k.innerHTML=WAVE.strDefault(b.content,"&nbsp;");h.appendChild(k);var r=g.DLG_UNDEFINED;this.result=function(){return r};this.setContent=function(a){k.innerHTML=a};this.close=function(a){"undefined"===typeof a&&(a=g.DLG_CANCEL);if(r!==g.DLG_UNDEFINED)return r;if(!f(this,
a))return g.DLG_UNDEFINED;r=a;document.body.removeChild(h);WAVE.arrayDelete(p,h);g.curtainOff();this.eventInvoke(g.EVT_DIALOG_CLOSE,a);return a};this.ok=function(){this.close(g.DLG_OK)};this.cancel=function(){this.close(g.DLG_CANCEL)};this.title=function(a){if("undefined"===typeof a||null===a)return d.innerHTML;d.innerHTML=a;e()};this.content=function(a){if("undefined"===typeof a||null===a)return k.innerHTML;k.innerHTML=a;e()};this.widthpct=function(a){if("undefined"===typeof a||a===m)return m;m=
a;e()};this.widthpct=function(b){if("undefined"===typeof b||b===a)return a;a=b;e()};e();var n=null;$(window).resize(function(){n&&clearTimeout(n);n=setTimeout(function(){e();n=null},500)});c(this)};g.showConfirmationDialog=function(b,e,c,f,h){function m(b,c,e){var l=document.createElement("button");l.style.margin="0 5px";l.className=g.CLS_DIALOG_BUTTON+" "+a;l.setAttribute("onclick",e);l.innerHTML=c;b.appendChild(l)}WAVE.isObject(h)||(h={});WAVE.isArray(c)||(c=[]);WAVE.strDefault(e,"Please confirm");
var a=WAVE.strDefault(h.btnCls);b=new WAVE.GUI.Dialog({title:WAVE.strDefault(b,"Confirmation"),cls:WAVE.strDefault(h.cls),onShow:function(a){},onClose:f});f=document.createElement("div");f.style.textAlign="center";f.style.padding="5px 0 0 0";f.className=g.CLS_DIALOG_FOOTER;-1<$.inArray(WAVE.GUI.DLG_OK,c)&&m(f,"OK",WAVE.strHTMLTemplate("WAVE.GUI.currentDialog().close('@result@');",{result:WAVE.GUI.DLG_OK}));-1<$.inArray(WAVE.GUI.DLG_YES,c)&&m(f,"Yes",WAVE.strHTMLTemplate("WAVE.GUI.currentDialog().close('@result@');",
{result:WAVE.GUI.DLG_YES}));-1<$.inArray(WAVE.GUI.DLG_NO,c)&&m(f,"No",WAVE.strHTMLTemplate("WAVE.GUI.currentDialog().close('@result@');",{result:WAVE.GUI.DLG_NO}));-1<$.inArray(WAVE.GUI.DLG_CANCEL,c)&&m(f,"Cancel",WAVE.strHTMLTemplate("WAVE.GUI.currentDialog().close('@result@');",{result:WAVE.GUI.DLG_CANCEL}));b.setContent(e+function(a){var b=document.createElement("div");b.appendChild(a.cloneNode(!0));return b.innerHTML}(f))};var f=!1;g.dirty=function(b){if("undefined"===typeof b)return f;f=b};g.isDirty=
function(){return f||null!==g.currentDialog()};g.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(b){g.SUPPRESS_UNLOAD_CHECK||!g.isDirty()&&!WAVE.RecordModel.isDirty()||((b||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};g.PuzzleKeypad=function(b){if("undefined"===typeof b||null===b||"undefined"===typeof b.DIV||WAVE.strEmpty(b.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var e=
this;WAVE.extend(e,WAVE.EventManager);var c=WAVE.genRndKey(4),f=b.DIV,h=WAVE.strEmpty(b.Help)?"Please enter the following security information by touching the symbols below":b.Help,m=WAVE.strEmpty(b.Question)?"":b.Question,a=[],d=b.Image,k=null,r=null,n=null;this.value=function(){return a};this.jsonValue=function(){return JSON.stringify(a)};this.help=function(a){if("undefined"===typeof a)return h;h=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;
k.innerHTML=h};this.question=function(a){if("undefined"===typeof a)return m;m=WAVE.strEmpty(a)?"":a;r.innerHTML=m};(function(){var b="pzl_"+c+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),b={hid:"divHelp_"+b,qid:"divQuestion_"+b,tid:"tbValue_"+b,bid:"btnClear_"+b,iid:"img_"+b,help:h,question:m,img:d+"&req="+WAVE.genRndKey(),clear:"Clear"},K=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",
b);f.innerHTML=K;$("#"+b.bid).click(function(b){b.preventDefault();n.value="";a=[];e.eventInvoke(g.EVT_PUZZLE_KEYPAD_CHANGE,a)});$("#"+b.iid).click(function(b){var c=$(this).offset();a.push({x:Math.round(b.pageX-c.left),y:Math.round(b.pageY-c.top)});n.value+="*";e.eventInvoke(g.EVT_PUZZLE_KEYPAD_CHANGE,a)});k=WAVE.id(b.hid);r=WAVE.id(b.qid);n=WAVE.id(b.tid);WAVE.id(b.bid);WAVE.id(b.iid)})()};var v=function(b){function e(a){return A.wFirst(function(b){return b.element===a})}function c(a){return K.wFirst(function(b){return b.name===
a})}function f(a,b){var d=c(a);null===d?(d={name:a,cfg:b||{},elementInfos:[]},q.push(d)):b&&(d.cfg=b);return d}function h(a){var b=a.currentTarget,c=e(b);null!==c&&(a=c.ruler.onMouseMove(a),d(b,c.scopeInfos,a),b=WAVE.arrayWalkable(c.scopeInfos).wSelect(function(a){return a.name}).wToArray(),n.eventInvoke(g.EVT_RULER_MOUSE_MOVE,a,b))}function m(a){a=a.currentTarget;var b=e(a);null!==b&&(b.ruler.onMouseEnter(),k(a,b.scopeInfos),a=WAVE.arrayWalkable(b.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
n.eventInvoke(g.EVT_RULER_MOUSE_ENTER,a))}function a(a){var b=a.currentTarget,c=e(b);null!==c&&(c.ruler.onMouseLeave(a),r(b,c.scopeInfos),a=WAVE.arrayWalkable(c.scopeInfos).wSelect(function(a){return a.name}).wToArray(),n.eventInvoke(g.EVT_RULER_MOUSE_LEAVE,a))}function d(a,b,c){c={scope:null,masterRes:c};for(var d in b){var e=b[d];c.scope=e;for(var l in e.elementInfos){var h=e.elementInfos[l];if(a!==h.element)h.ruler.onScopeMouseMove(c)}}}function k(a,b){for(var c in b){var d=b[c],e;for(e in d.elementInfos){var l=
d.elementInfos[e];if(a!==l.element)l.ruler.onScopeMouseEnter(d)}}}function r(a,b){for(var c in b){var d=b[c],e;for(e in d.elementInfos){var l=d.elementInfos[e];if(a!==l.element)l.ruler.onScopeMouseLeave(d)}}}var n=this;WAVE.extend(this,WAVE.EventManager);var q=[],K=WAVE.arrayWalkable(q),p=[],A=WAVE.arrayWalkable(p);this.set=function(b){var c=b.element,d=b.elementCfg;b=f(b.scopeName||"",b.scopeCfg);var k=e(c);if(null===k){var k={element:c,cfg:d||{},scopeInfos:[]},g=$(c);g.bind("mouseenter",m);g.bind("mouseleave",
a);g.bind("mousemove",h);c=new t(c,d);k.ruler=c;p.push(k)}else d&&(k.cfg=d,k.ruler.cfg(d));c=k;-1===b.elementInfos.indexOf(c)&&b.elementInfos.push(c);-1===c.scopeInfos.indexOf(b)&&c.scopeInfos.push(b)};this.unset=function(b){var d=b.element,k=b.scopeName,g=e(b.element);null!==g&&(k?(b=c(k),null!==b&&WAVE.arrayDelete(b.elements,g),WAVE.arrayDelete(g.scopes,b)):(WAVE.arrayWalkable(g.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,g)}),g.scopeInfos.splice(0,g.scopeInfos.length)),0===g.scopeInfos.length&&
(d=$(d),d.unbind("mouseenter",m),d.unbind("mouseleave",a),d.unbind("mousemove",h),WAVE.arrayDelete(p,g)))};this.setScope=function(a,b){f(a,b)};this.mouseMove=function(a,b){var c=K.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();d(null,c,a)};this.mouseEnter=function(a){var b=K.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();k(null,b)};this.mouseLeave=function(a){var b=K.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();r(null,b)}},t=function(b,e){function c(a,b,
c){a=new WAVE.arrayWalkable([w,C,B,z,t,null,v,E,D,G,null,x]);c?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function g(){p||(w=document.createElement("div"),w.id="WAVE_GUI_Ruler",w.innerHTML="Hint DIV",w.className=n,w.style.position="absolute",document.body.appendChild(w),z=a(!0),C=a(!0),D=a(!1),v=a(!1),B=a(!1),t=a(!1),E=a(!0),G=a(!0),p=!0)}function h(){p&&
(d(w),w=null,d(z),z=null,d(C),C=null,d(D),D=null,d(v),v=null,d(B),B=null,d(t),t=null,d(E),E=null,d(G),G=null,p=!1)}function f(){A&&(d(x),x=null,A=!1)}function a(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=q;document.body.appendChild(b);return b}function d(a){null!==a&&document.body.removeChild(a)}var k=this,r=e||{};this.cfg=function(a){"undefined"!==typeof a&&a!==e&&(r=a);return r};var n=r.hintCls||"wvRulerHint",q=r.sightCls||
"wvRulerSight",K=r.sightSize||8,p=!1,A=!1,w=null,C=null,B=null,z=null,t=null,v=null,E=null,D=null,G=null,x=null;this.onMouseEnter=function(a){g()};this.onMouseLeave=function(a){h()};this.onMouseMove=function(a){f();g();var d;if(r.parentRc)d=r.parentRc;else{var e=b.getBoundingClientRect();d=WAVE.Geometry.toRectWH(e.left,e.top,e.width,e.height)}var e=a.clientX-d.left(),l=a.clientY-d.top();w.style.left=a.clientX+"px";w.style.top=a.clientY+"px";var h=null,h=r.getTxt?r.getTxt({clientPoint:new WAVE.Geometry.Point(a.clientX,
a.clientY),divHint:w}):e+", "+l;w.innerHTML=h;for(var h=w.getBoundingClientRect(),h=WAVE.Geometry.toRectWH(h.left,h.top,h.width,h.height),k=a.clientX,q=a.clientY,n=d,p=null,A=h.square(),Q=Number.MAX_VALUE,X=0;X<2*Math.PI;X+=Math.PI/4){var V=WAVE.Geometry.rotateRectAroundCircle(k,q,20,h.width(),h.height(),X),R=WAVE.Geometry.overlapAreaRect(n,V),R=A-R;if(0===R){p=V;break}R<Q&&(Q=R,p=V)}h=p.topLeft();w.style.left=h.x()+"px";w.style.top=h.y()+"px";h=a.clientX;k=a.clientY;q=h-K;q<d.left()&&(q=d.left());
n=h+K;n>d.right()&&(n=d.right());p=k-K;p<d.top()&&(p=d.top());A=k+K;A>d.bottom()&&(A=d.bottom());C.style.left=d.left()+"px";C.style.width=q-d.left()+"px";C.style.top=k+"px";z.style.left=n+"px";z.style.width=d.right()-n+"px";z.style.top=k+"px";B.style.top=d.top()+"px";B.style.height=p-d.top()+"px";B.style.left=h+"px";t.style.top=A+"px";t.style.height=d.bottom()-A+"px";t.style.left=h+"px";v.style.top=p+"px";v.style.height=A-p+"px";v.style.left=q+"px";D.style.top=p+"px";D.style.height=A-p+"px";D.style.left=
n+"px";E.style.left=q+"px";E.style.width=n-q+"px";E.style.top=p+"px";G.style.left=q+"px";G.style.width=n-q+"px";G.style.top=A+"px";e=r.getMasterInfo?r.getMasterInfo({clientPoint:new WAVE.Geometry.Point(a.clientX,a.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(e,l),isInParentRc:!0};c(a.clientX,a.clientY,e.isInParentRc);return e};this.onScopeMouseEnter=function(b){A||(x=a(!1),A=!0)};this.onScopeMouseLeave=function(a){f()};this.onScopeMouseMove=function(b){h();A||(x=a(!1),A=!0);var d=k.getParentRc(),
e,l,g;r.getSlaveInfo?(l=r.getSlaveInfo({masterRes:b.masterRes}),g=l.isInParentRc,e=l.clientPoint.x(),l=l.clientPoint.y()):(l=b.masterRes.elementRcPoint,g=!0,e=d.left()+l.x(),l=d.top()+l.y());c(e,l,b.masterRes.isInParentRc&&g);x.style.top=d.top()+"px";x.style.height=d.height()+"px";x.style.left=e+"px"};this.getParentRc=function(){var a;r.parentRc?a=r.parentRc:(a=b.getBoundingClientRect(),a=WAVE.Geometry.toRectWH(a.left,a.top,a.width,a.height));return a}},x=null;g.rulerSet=function(b){null===x&&(x=
new v);x.set(b)};g.rulerUnset=function(b){null!==x&&x.unset(b)};g.rulerSetScope=function(b,e){null===x&&(x=new v);x.setScope(b,e)};g.rulerMouseMove=function(b,e){null!==x&&x.mouseMove(b,e)};g.rulerMouseEnter=function(b){null!==x&&x.mouseEnter(b)};g.rulerMouseLeave=function(b){null!==x&&x.mouseLeave(b)};g.rulerEventBind=function(b,e){null===x&&(x=new v);x.eventBind(b,e)};g.WindowConnector=function(b){b=b||{};var e=this,c=b.wnd||window,g=[],h=WAVE.arrayWalkable(g);this.connectedWindows=function(){return WAVE.arrayShallowCopy(g)};
this.openWindow=function(a){var b=window.open(a||window.location.href);h.wEach(function(a){a.Connector.addWindow(b)});e.addWindow(b)};this.closeCurrentWindow=function(){h.wEach(function(a){a.Connector.removeWindow(c)})};this.addWindow=function(a){g.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(g,a)};this.callWindowFunc=function(a){var b;h.wEach(function(c){c.closed?(b||(b=[]),b.push(c)):a(c)});if(b){var c=WAVE.arrayWalkable(b);c.wEach(function(a){e.removeWindow(a)});c.wEach(function(a){h.wEach(function(b){b.Connector.removeWindow(a)})})}};
this.logMsg=function(a){console.log(a)};if(c.opener&&c.opener.Connector){e.addWindow(c.opener);b=c.opener.Connector.connectedWindows();for(var f in b){var a=b[f];a!==c&&(a.closed||e.addWindow({window:a}))}}};g.connectorEnsure=function(b){b=b||window;b.Connector||(b.Connector=new g.WindowConnector({wnd:b}))};var r=0;g.Tree=function(b){function e(a,b){var d;k===g.TREE_SELECTION_SINGLE?(!0===b&&p.getDescendants().wEach(function(b){if(b.node!==a&&!0===b.node.selected()){var d={phase:g.EVT_PHASE_BEFORE,
node:b.node,value:b.node.selected()};c(g.EVT_TREE_NODE_SELECTION,d);b.node.selected(!1,!0);b={phase:g.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};c(g.EVT_TREE_NODE_SELECTION,b)}}),d={phase:g.EVT_PHASE_AFTER,node:a,value:b},c(g.EVT_TREE_NODE_SELECTION,d)):k===g.TREE_SELECTION_MULTI&&(d={phase:g.EVT_PHASE_AFTER,node:a,value:b},c(g.EVT_TREE_NODE_SELECTION,d))}function c(a,b){n||h.eventInvoke(a,b)}var f=function(b){b=b||{};var n=this;r++;var u="tvn_"+r,A=b.parent||null;if(null!==A&&A.tree()!==
h)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return A};var w,C,t,z,v;this.__divChildren=function(){return null!==A?v:m};var x="undefined"!==typeof b.id?b.id.toString():r.toString();this.id=function(){return x};var E="undefined"===typeof b.expandedContent?h.DEFAULT_NODE_EXPANDED_CONTENT:b.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return E;E=a;C&&(C.innerHTML=M?E:D)};var D="undefined"===typeof b.collapsedContent?h.DEFAULT_NODE_COLLAPSED_CONTENT:
b.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return D;D=a;C&&(C.innerHTML=M?E:D)};this.path=function(){return null===A?"":A===p?x:A.path()+"/"+x};this.level=function(){return null===A?-1:A===p?0:A.level()+1};this.html=function(a){if(null===A)return null;if("undefined"===typeof a)return z.innerHTML;var b={phase:g.EVT_PHASE_BEFORE,node:n,oldContent:z.innerHTML,newContent:a,abort:!1};c(g.EVT_TREE_NODE_CONTENT,b);!0!==b.abort&&(z.innerHTML=a,c(g.EVT_TREE_NODE_CONTENT,
{phase:g.EVT_PHASE_AFTER,node:n,oldContent:z.innerHTML,newContent:a}))};var G=!1!==b.selectable;this.selectable=function(a){if("undefined"===typeof a)return G;G=a;J&&!a&&n.selected(!1)};var J=!0===b.selected;this.selected=function(a,b){if(k===g.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return J;if(a!==J&&(G||!G&&!a)){if(!0!==b){var d={phase:g.EVT_PHASE_BEFORE,node:n,value:a,abort:!1};c(g.EVT_TREE_NODE_SELECTION,d);if(!0===d.abort)return}J=a;z.className=J?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn();
!0!==b&&e(n,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return w.className;w.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return C.className;C.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return t.className;t.className=a};var H=b.wvTreeNodeButtonExpanded||a.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(b){if("undefined"===typeof b)return H||a.wvTreeNodeButtonExpanded;b!==H&&(H=b,C.className=M?n.wvTreeNodeButtonExpanded():
n.wvTreeNodeButtonCollapsed())};var U=b.wvTreeNodeButtonCollapsed||a.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(b){if("undefined"===typeof b)return U||a.wvTreeNodeButtonCollapsed;b!==U&&(U=b,C.className=M?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed())};var N=b.wvTreeNodeOwn||a.wvTreeNodeOwn;this.wvTreeNodeOwn=function(b){if("undefined"===typeof b)return N||a.wvTreeNodeOwn;b!==N&&(N=b,z.className=J?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn())};var S=b.wvTreeNodeOwnSelected||
a.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(b){if("undefined"===typeof b)return S||a.wvTreeNodeOwnSelected;b!==S&&(S=b,z.className=J?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return v.className;v.className=a};var O=b.childrenDisplayVisible||d;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return O;a!==O&&(O=a,M&&(v.style.display=O))};var I=b.data;this.data=function(a){if("undefined"===typeof a)return I;
if(I!==a){var b={phase:g.EVT_PHASE_BEFORE,node:n,oldData:I,newData:a,abort:!1};c(g.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(I=a,c(g.EVT_TREE_NODE_DATA,{phase:g.EVT_PHASE_AFTER,node:n,oldData:I,newData:a}))}};var M=!0===b.expanded;this.expanded=function(a){if("undefined"===typeof a)return M;if(null!==A&&M!==a){var b={phase:g.EVT_PHASE_BEFORE,node:n,value:a,abort:!1};c(g.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(M=a,C.className=M?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed(),C.innerHTML=a?
E:D,v.style.display=a?O:"none",c(g.EVT_TREE_NODE_EXPANSION,{phase:g.EVT_PHASE_AFTER,node:n,value:a}))}};var F=[];this.children=function(){return WAVE.arrayShallowCopy(F)};this.__children=function(){return F};this.tree=function(){return h};this.getDescendants=function(){return n.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(F).getWalker(),c=null,d=0,e=-1;this.reset=function(){b=WAVE.arrayWalkable(F).getWalker();d=0;e=-1};this.moveNext=function(){function l(){if(b.moveNext())return e++,
d=1,!0;d=0;return!1}if(0===d)return l();if(1===d)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())d=2;else return l();else if(2===d&&!c.moveNext())return l();return!0};this.current=function(){if(1===d)return{level:a,nodeNum:e,node:b.current()};if(2===d)return c.current()}},c={getWalker:function(){return new b},tree:h};WAVE.extend(c,WAVE.Walkable);return c};this.getChildIdx=function(a,b){return b?n.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),a)}):WAVE.arrayWalkable(F).wFirstIdx(function(b){return WAVE.strSame(b.id(),
a)})};this.getChild=function(a,b){if(b){var c=n.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(F).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var b=null,c=WAVE.arrayWalkable(F),d;for(d in a){var e=a[d],b=c.wFirst(function(a){return a.id()===e});if(null===b)return null;c=WAVE.arrayWalkable(b.__children())}return b};
this.unveil=function(){var a=A;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var b={phase:g.EVT_PHASE_BEFORE,parentNode:n,childNodeInit:a,abort:!1};c(g.EVT_TREE_NODE_ADD,b);if(!0!==b.abort)return a.parent=n,a=new f(a),F.push(a),null!==A&&(C.style.visibility="visible"),c(g.EVT_TREE_NODE_ADD,{phase:g.EVT_PHASE_AFTER,parentNode:n,childNode:a}),a};this.__removeChild=function(a){WAVE.arrayDelete(F,a);0===F.length&&null!==
A&&(C.style.visibility="hidden")};this.remove=function(){if(null===A)console.error("Root node couldn't be removed");else{var a={phase:g.EVT_PHASE_BEFORE,parentNode:A,childNode:n,abort:!1};c(g.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(w.parentNode.removeChild(w),A.__removeChild(n),c(g.EVT_TREE_NODE_REMOVE,{phase:g.EVT_PHASE_AFTER,parentNode:A,childNode:n}))}};this.removeAllChildren=function(){var a=WAVE.arrayShallowCopy(F),b;for(b in a)a[b].remove()};if(null!==A){var T={id:u,wvTreeNode:b.wvTreeNode||
a.wvTreeNode,wvTreeNodeContent:b.wvTreeNodeContent||a.wvTreeNodeContent,wvTreeNodeOwn:b.wvTreeNodeOwn||a.wvTreeNodeOwn,wvTreeNodeOwnSelected:b.wvTreeNodeOwnSelected||a.wvTreeNodeOwnSelected,wvTreeNodeChildren:b.wvTreeNodeChildren||a.wvTreeNodeChildren};T.wvTreeNodeButton=M?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed();var W=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
T),Z=A.__divChildren();w=document.createElement("div");w.id="root_"+u;w.className=T.wvTreeNode;w.innerHTML=W;Z.appendChild(w);t=WAVE.id("content_"+u);z=WAVE.id("own_"+u);v=WAVE.id("children_"+u);z.innerHTML=b.html;z.className=J?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn();$(z).click(function(){n.selected(!J)});b=!0===b.expanded;C=WAVE.id("exp_"+u);C.innerHTML=M?E:D;C.style.visibility="hidden";$(C).click(function(){n.expanded(!M)});v.style.display=b?O:"none"}};if("undefined"===typeof b||null===b||"undefined"===
typeof b.DIV||null===b.DIV)throw"Tree.ctor(init.DIV)";var h=this;WAVE.extend(h,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var m=b.DIV,a={wvTreeNode:b.wvTreeNode||g.CLS_TREE_NODE,wvTreeNodeButtonExpanded:b.wvTreeNodeButtonExpanded||g.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:b.wvTreeNodeButtonCollapsed||g.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:b.wvTreeNodeContent||g.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:b.wvTreeNodeOwn||g.CLS_TREE_NODE_OWN,
wvTreeNodeOwnSelected:b.wvTreeNodeOwnSelected||g.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:b.wvTreeNodeChildren||g.CLS_TREE_NODE_CHILDREN},d=b.childrenDisplayVisible||"block",k=b.treeSelectionType||g.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof k)return k;k=a};this.selectedNodes=function(a){if("undefined"===typeof a)return p.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";p.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var n=!0===b.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return n;n=a};var p=new f;this.root=function(){return p}};var e=0;g.ObjectInspector=function(b,l){function c(l,a,d){var g=Object.keys(a),f,r;for(r in g){var y=g[r],n=a[y];if(null!==n&&"object"!==typeof n){var p="objinsp_edit_"+e++;
f=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:p,key:y,val:n,objpath:d?d+"/"+y:y,cls:h});f=l.addChild({html:f});p=WAVE.id(p);p.objpath=f.path();p.addEventListener("input",function(a){for(var c=a.target.getAttribute("objpath").split(/\//),d=b,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=a.target.value})}else f=l.addChild({html:y}),c(f,n,d?d+"/"+y:y)}}WAVE.extend(this,WAVE.EventManager);var f=
new g.Tree({DIV:l.div});l=l||{};var h=l.wvObjectInspectorEditor||g.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(b){if("undefined"===typeof b)return h;h=b};this.wvTreeNodeButtonExpanded=function(b){if("undefined"===typeof b)return fWVTreeNodeButtonExpanded||fNodeTemplateClsArgs.wvTreeNodeButtonExpanded;b!==fWVTreeNodeButtonExpanded&&(fWVTreeNodeButtonExpanded=b,fExpander.className=fExpanded?node.wvTreeNodeButtonExpanded():node.wvTreeNodeButtonCollapsed())};c(f.root(),b,"")};g.IBox=
function(b,e){function c(a){return{x:isNaN(a.pageX)?a.originalEvent.touches[0].pageX:a.pageX,y:isNaN(a.pageY)?a.originalEvent.touches[0].pageY:a.pageY}}function f(){return G===g.POS_LEFT||G===g.POS_RIGHT}function h(a){var b=U[a.src];if(!b){var c=a.naturalHeight,b=a.naturalWidth;if(0===c||0===b)c=new Image,c.src=a.src,b=c.width,c=c.height;b={width:b,height:c};U[a.src]=b}return b}function m(a){a=WAVE.id(a);var b=h(a),c=b.width,d=b.height,b=a.parentElement.clientWidth,e=a.parentElement.clientHeight;
1<b*d/(c*e)?(c=e*c/d,a.style.width=c+"px",a.style.height=e+"px",a.style.left=(b-c)/2+"px",a.style.top="0"):(c=b*d/c,a.style.width=b+"px",a.style.height=c+"px",a.style.left="0",a.style.top=(e-c)/2+"px")}function a(a){var b=WAVE.id(a.id),c=WAVE.id(a.cropId),d=WAVE.id(a.imageId);f()?b.style.height=b.clientWidth+"px":b.style.width=b.clientHeight+"px";var e=h(d),l=e.width,e=e.height,e=typeof a.imageHeight===WAVE.UNDEFINED||isNaN(a.imageHeight)?e:a.imageHeight,l=typeof a.imageWidth===WAVE.UNDEFINED||isNaN(a.imageWidth)?
l:a.imageWidth,g=typeof a.imageLeft===WAVE.UNDEFINED||isNaN(a.imageLeft)?0:a.imageLeft;a=typeof a.imageTop===WAVE.UNDEFINED||isNaN(a.imageTop)?0:a.imageTop;var k=Math.min(b.clientHeight/e,b.clientWidth/l);c.style.height=e*k+"px";c.style.width=l*k+"px";c.style.top=(b.clientHeight-e*k)/2+"px";c.style.left=(b.clientWidth-l*k)/2+"px";d.style.height=d.naturalHeight*k+"px";d.style.width=d.naturalWidth*k+"px";d.style.left=g*k+"px";d.style.top=a*k+"px"}function d(a){var b=WAVE.id(z.imgMainImageId);if(a!==
b.src){var c=new Image;c.onload=function(){var c=this.src;$(b).fadeOut(g.DEFAULT_IMAGE_FADEOUT_TIME,function(){b.src=c;m(z.imgMainImageId)}).fadeIn(g.DEFAULT_IMAGE_FADEIN_TIME,function(){C.eventInvoke(g.EVT_IMAGE_CHANGED,a)})};c.onerror=function(){b.src=g.DEFAULT_IMAGE;m(z.imgMainImageId)};c.src=a}}function k(){var a=WAVE.id(z.divThumbsImagesContainerId);if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth){if(!(1>H.length)){a=WAVE.id(H[0].id);a.style.marginTop="";a.style.marginLeft="";var a=
WAVE.id(z.divThumbsImagesContainerId),b=WAVE.id(z.divNavBackId),c=WAVE.id(z.divNavForthId);f()?(a.style.height="90%",b.style.height="5%",b.style.width="100%",b.style.display="",c.style.height="5%",c.style.width="100%",c.style.display=""):(a.style.width="90%",b.style.height="100%",b.style.width="5%",b.style.display="inline-block",c.style.height="100%",c.style.width="5%",c.style.display="inline-block")}m(z.imgNavBackId);m(z.imgNavForthId)}else if(WAVE.id(z.divNavBackId).style.display="none",WAVE.id(z.divNavForthId).style.display=
"none",!(1>H.length)){for(var a=WAVE.id(H[0].id),b=WAVE.id(z.divThumbsImagesContainerId).parentElement,d=c=0,e=0;e<H.length;e++)var l=WAVE.id(H[e].id),c=c+l.clientWidth,d=d+l.clientHeight;f()?a.style.marginTop=(b.clientHeight-d)/2+"px":a.style.marginLeft=(b.clientWidth-c)/2+"px"}}function r(){var a=WAVE.id(z.divNavBackId),b=WAVE.id(z.divNavForthId),c=D.canScrollBack()?1:g.DEFAULT_ARROWS_OPACITY,d=D.canScrollForth()?1:g.DEFAULT_ARROWS_OPACITY;a.style.opacity=c;b.style.opacity=d}function n(){m(z.imgMainImageId);
for(var b=0;b<H.length;b++)a(H[b]);k()}function p(b,c){b.imageLoaded=!0;WAVE.id(b.imageId).src=c;a(b);var d;a:{for(d=0;d<H.length;d++)if(!H[d].imageLoaded){d=!1;break a}d=!0}d?n():k()}function K(a){var b=WAVE.id(a.imageId);if(a.thumbImageSrc!==b.src){var c=new Image;c.onload=function(){var c=this.src;$(b).fadeOut(g.DEFAULT_IMAGE_FADEOUT_TIME,function(){p(a,c)}).fadeIn(g.DEFAULT_IMAGE_FADEIN_TIME)};c.onerror=function(){p(a,g.DEFAULT_IMAGE)};c.src=a.thumbImageSrc}}function t(a){return function(){d(a)}}
function v(a){var b,d,e=WAVE.id(z.imgMainImageId),l=WAVE.id(z.divMainImageId);d=h(e);b=d.width;d=d.height;var g=l.clientWidth,k=l.clientHeight;if(b<=g&&d<=k)return!1;var f=c(a);a=f.x-l.offsetLeft;l=f.y-l.offsetTop;1<b*k/(d*g)?(f=g*d/b,l=Math.min(Math.max(l,(k-f)/2),(k+f)/2),a=b*a/g,l=(l-(k-f)/2)*b/g):(f=k*b/d,a=Math.min(Math.max(a,(g-f)/2),(g+f)/2),a=(a-(g-f)/2)*d/k,l=d*l/k);b=b>g?Math.min(Math.max(a-g/2,0),b-g):(b-g)/2;d=d>k?Math.min(Math.max(l-k/2,0),d-k):(d-k)/2;e.style.width="";e.style.height=
"";e.style.left=-b+"px";e.style.top=-d+"px";return!0}function w(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble&&(a.cancelBubble=!0);a.preventDefault&&a.preventDefault();return a.returnValue=!1}WAVE.isStringType(typeof b)&&(b=WAVE.id(b));WAVE.isObject(e)||(e={});var C=this;WAVE.extend(C,WAVE.EventManager);var B="ibox_"+WAVE.genRndKey(4),z={divFrameId:"divFrame_"+B,divThumbsContainerId:"divThumbsContainer_"+B,divNavBackId:"divNavBack_"+B,imgNavBackId:"imgNavBack_"+B,divThumbsImagesContainerId:"divThumbsImagesContainer_"+
B,divNavForthId:"divNavForth_"+B,imgNavForthId:"imgNavForth_"+B,divMainImageId:"divMainImage_"+B,imgMainImageId:"imgMainImage_"+B},x=!1,L=!1,E=null,D,G,J,H,U={};this.visible=function(a){var b=WAVE.id(z.divFrameId).style.visibility;""===b&&(b="visible");if(typeof a===WAVE.UNDEFINED||a===("visible"===b))return a;WAVE.id(z.divFrameId).style.visibility=a?"visible":"hidden";C.eventInvoke(g.EVT_INTERACTION_CHANGE,"visible",a);return a};var N=e[g.PARAM_IMAGES_LIST],B=e[g.PARAM_DEF_IMG_SRC],S=typeof B===
WAVE.UNDEFINED?g.DEFAULT_IMAGE:WAVE.strDefault(N[B],g.DEFAULT_IMAGE),B=e[g.PARAM_DEF_THUMB_SRC],O=typeof B===WAVE.UNDEFINED?g.DEFAULT_IMAGE:WAVE.strDefault(N[B],g.DEFAULT_IMAGE);H=e[g.PARAM_THUMBS];J=WAVE.strDefault(e[g.PARAM_THUMBS_SCROLL_DELTA],g.DEFAULT_THUMBS_SCROLL_DELTA);G=WAVE.strDefault(e[g.PARAM_THUMBS_POSITION],g.DEFAULT_THUMBS_POSITION);var I=document.createElement("img");I.id=z.imgMainImageId;I.className=g.IBOX_IMG_MAINIMAGE;I.src=g.DEFAULT_IMAGE;I.style.cssText=g.STYLE_IMG_MAINIMAGE+
g.STYLE_DISABLE_MOBILE_HANDLING;I.ondragstart=function(){return!1};B=document.createElement("div");B.id=z.divThumbsImagesContainerId;B.className=g.IBOX_DIV_THUMBSIMAGESCONTAINER;if(typeof H!==WAVE.UNDEFINED)for(var M=0;M<H.length;++M){var F=H[M],T="divThumbId_ibox_"+M+"_"+WAVE.genRndKey(4),W="divThumbCropId_ibox_"+M+"_"+WAVE.genRndKey(4),Z="imgThumbImageId_ibox_"+M+"_"+WAVE.genRndKey(4),X=WAVE.strDefault(F[g.PARAM_THUMB_TITLE],""),V=F[g.PARAM_BIG_IMG_SRC],V=typeof V===WAVE.UNDEFINED?g.DEFAULT_IMAGE:
WAVE.strDefault(N[V],S),Y=F[g.PARAM_THUMB_IMG_SRC],Y=typeof Y===WAVE.UNDEFINED?g.DEFAULT_IMAGE:WAVE.strDefault(N[Y],O);Y!==g.DEFAULT_IMAGE&&Y!==O&&(F.imageHeight=parseFloat(F[g.PARAM_HEIGHT]),F.imageWidth=parseFloat(F[g.PARAM_WIDTH]),F.imageLeft=parseFloat(F[g.PARAM_LEFT]),F.imageTop=parseFloat(F[g.PARAM_TOP]));F.imageLoaded=!1;F.bigImageSrc=V;F.thumbImageSrc=Y;F.id=T;F.cropId=W;F.imageId=Z;F.title=X;F=f()?g.STYLE_DIV_THUMB_V:g.STYLE_DIV_THUMB_H;B.innerHTML+=WAVE.strHTMLTemplate("<div id='@divThumbId@' class='@divThumbClass@' style='@divThumbStyle@'><div id='@divThumbCropId@' class='@divThumbCropClass@' style='@divThumbCropStyle@'><img id='@divThumbImageId@' class='@divThumbImageClass@' style='@divThumbImageStyle@' src='@initialSrc@' ondragstart='return false;'></div></div>",
{divThumbId:T,divThumbClass:g.IBOX_DIV_THUMB,divThumbStyle:F,divThumbCropId:W,divThumbCropClass:g.IBOX_DIV_THUMB_CROP,divThumbCropStyle:g.STYLE_DIV_THUMB_CROP,divThumbImageId:Z,initialSrc:g.DEFAULT_IMAGE,divThumbImageClass:g.IBOX_DIV_THUMB_IMAGE,divThumbImageStyle:g.STYLE_DIV_THUMB_IMAGE+g.STYLE_DISABLE_MOBILE_HANDLING})}f()?(B.style.cssText=g.STYLE_DIV_THUMBSIMAGESCONTAINER_V,S=g.STYLE_DIV_THUMBSCONTAINER_V,O=g.STYLE_DIV_THUMBSNAV_V,M=g.STYLE_DIV_MAINIMAGE_V,T=g.DEFAULT_UP_NAVIGATION_IMAGE,W=g.DEFAULT_DOWN_NAVIGATION_IMAGE,
N=G===g.POS_LEFT?"right":"left"):(B.style.cssText=g.STYLE_DIV_THUMBSIMAGESCONTAINER_H,S=g.STYLE_DIV_THUMBSCONTAINER_H,O=g.STYLE_DIV_THUMBSNAV_H,M=g.STYLE_DIV_MAINIMAGE_H,T=g.DEFAULT_LEFT_NAVIGATION_IMAGE,W=g.DEFAULT_RIGHT_NAVIGATION_IMAGE,N="");I="<div id='@divMainImageId@' class='@divMainImageClass@' style='@divMainImageStyle@ float: @imageFloat@'>"+I.outerHTML+"</div>";B="<div id='@divThumbsContainerId@' class='@divThumbsContainerClass@' style='@divThumbsContainerStyle@'><div id='@divNavBackId@' class='@divNavBackClass@' style='@divNavStyle@ opacity: @defaultOpacity@'><img id='@imgNavBackId@' style='@imgNavBackStyle@' src='@imgNavBackSrc@'></div>"+
B.outerHTML+"<div id='@divNavForthId@' class='@divNavForthClass@' style='@divNavStyle@'><img id='@imgNavForthId@' style='@imgNavForthStyle@' src='@imgNavForthSrc@'></div></div>";B=f()||G===g.POS_BOTTOM?"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+I+B+"</div>":"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+B+I+"</div>";b.innerHTML=WAVE.strHTMLTemplate(B,{divFrameId:z.divFrameId,divFrameClass:g.IBOX_DIV_FRAME,divFrameStyle:g.STYLE_DIV_FRAME,divMainImageId:z.divMainImageId,
divMainImageClass:g.IBOX_DIV_MAINIMAGE,divMainImageStyle:M,imageFloat:N,divThumbsContainerId:z.divThumbsContainerId,divThumbsContainerClass:g.IBOX_DIV_THUMBSCONTAINER,divThumbsContainerStyle:S,divNavBackId:z.divNavBackId,defaultOpacity:g.DEFAULT_ARROWS_OPACITY,divNavBackClass:g.IBOX_DIV_THUMBSNAVIGATION,imgNavBackId:z.imgNavBackId,imgNavBackStyle:g.STYLE_IMG_THUMBSNAV,imgNavBackSrc:T,divNavStyle:O,divNavForthId:z.divNavForthId,divNavForthClass:g.IBOX_DIV_THUMBSNAVIGATION,imgNavForthId:z.imgNavForthId,
imgNavForthStyle:g.STYLE_IMG_THUMBSNAV,imgNavForthSrc:W});(function(){var a=WAVE.id(z.divThumbsImagesContainerId),b,c,d,e;f()?(b=function(){return{scrollTop:a.scrollTop-J*a.clientHeight}},c=function(){return{scrollTop:a.scrollTop+J*a.clientHeight}},d=function(){return 0<a.scrollTop},e=function(){return a.scrollTop+a.clientHeight<a.scrollHeight-1}):(b=function(){return{scrollLeft:a.scrollLeft-J*a.clientWidth}},c=function(){return{scrollLeft:a.scrollLeft+J*a.clientWidth}},d=function(){return 0<a.scrollLeft},
e=function(){return a.scrollLeft+a.clientWidth<a.scrollWidth-1});D={scrollBackFactory:b,scrollForthFactory:c,canScrollBack:d,canScrollForth:e}})();B=WAVE.id(z.divMainImageId);I=WAVE.id(z.divThumbsContainerId);$(B).on("mousedown touchstart",function(a){if(!v(a))return w(a);x=!0;return w(a)});$(B).on("mousemove touchmove",function(a){x&&v(a);return w(a)});$(I).on("mousedown touchstart",function(a){E=c(a);return w(a)});$(I).on("mousemove touchmove",function(a){if(null!==E){var b=WAVE.id(z.divThumbsImagesContainerId),
d,e=c(a);f()?(d=e.y-E.y,b.scrollTop+=-d):(d=e.x-E.x,b.scrollLeft+=-d);E=e;r()}return w(a)});(function(){var a=WAVE.id(z.divThumbsImagesContainerId),b=WAVE.id(z.divNavBackId),c=WAVE.id(z.divNavForthId);$(b).on("click touchend",function(){L||(L=!0,$(a).animate(D.scrollBackFactory(),function(){r();L=!1}))});$(c).on("click touchend",function(){L||(L=!0,$(a).animate(D.scrollForthFactory(),function(){r();L=!1}))})})();m(z.imgMainImageId);0<H.length&&t(H[0].bigImageSrc)();for(B=0;B<H.length;B++)I=H[B],a(I),
N=WAVE.id(I.imageId),$(N).on("click touchend",t(I.bigImageSrc)),K(I);$(window).resize(function(){n()});$(document).on("mouseup touchend",function(a){null!==E&&(k(),E=null);x&&(m(z.imgMainImageId),x=!1);return w(a)})};return g}();
WAVE.RecordModel.GUI=function(){function g(b){var c=WAVE.genAutoincKey("__wv.rm.gui");return"_"+b.recView().ID()+"_"+c}function n(l){var c=l.field(),f=l.DIV(),h="tb"+g(l),m=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:h,about:c.about(),cls:(c.required()?e.CLS_REQ:"")+" "+(c.isGUIModified()?e.CLS_MOD:"")}),a=c.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));a=c.kind();a=c.password()?"password":a===WAVE.RecordModel.KIND_SCREENNAME?
"text":a;m+=WAVE.strHTMLTemplate("<input id='@id@' type='@tp@' name='@name@' @disabled@ @maxlength@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:h,tp:a,name:c.name(),disabled:c.isEnabled()?"":"disabled",maxlength:0>=c.size()?"":"maxlength="+c.size(),readonly:c.readonly()?"readonly":"",value:c.isNull()?"":c.displayValue(),placeholder:WAVE.strEmpty(c.placeholder())?"":c.placeholder(),required:c.required()?"required":""});f.innerHTML=m;WAVE.id(h).__fieldView=l;$("#"+h).change(function(){var a=
this.value;try{this.__fieldView.field().setGUIValue(a),b=null}catch(c){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var e=this;if(b===e||null===b)b=e,setTimeout(function(){e.ERRORED||$(e).blur(function(){$(e).change()});e.focus();e.ERRORED=!0},50)}})}function p(l){var c=l.field(),f=l.DIV(),h="tb"+g(l),m=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:h,about:c.about(),cls:(c.required()?e.CLS_REQ:"")+
" "+(c.isGUIModified()?e.CLS_MOD:"")}),a=c.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:a}));m+=WAVE.strHTMLTemplate("<textarea id='@id@' name='@name@' @disabled@ @maxlength@ @readonly@ placeholder='@placeholder@' @required@>@value@</textarea>",{id:h,name:c.name(),disabled:c.isEnabled()?"":"disabled",maxlength:0>=c.size()?"":"maxlength="+c.size(),readonly:c.readonly()?"readonly":"",value:c.isNull()?"":c.displayValue(),placeholder:WAVE.strEmpty(c.placeholder())?
"":c.placeholder(),required:c.required()?"required":""});f.innerHTML=m;WAVE.id(h).__fieldView=l;$("#"+h).change(function(){var a=this.value;try{this.__fieldView.field().setGUIValue(a),b=null}catch(c){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var e=this;if(b===e||null===b)b=e,setTimeout(function(){e.ERRORED||$(e).blur(function(){$(e).change()});e.focus();e.ERRORED=!0},50)}})}function f(b){function c(a){var b=a.target.value,c=a.target.__fieldView.field();
c.readonly()?r(a.target.__fieldView):c.value(b,!0)}var f=b.field(),h=b.DIV(),m=f.lookupDict(),a=Object.keys(m),d;d="<fieldset>"+WAVE.strHTMLTemplate("<legend class='@cls@'>@about@</legend>",{about:f.about(),cls:(f.required()?e.CLS_REQ:"")+" "+(f.isGUIModified()?e.CLS_MOD:"")});var k=f.validationError();null!==k&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:k}));var k=g(b),n;for(n in Object.keys(m)){var p=a[n],q=m[p],K="rbt"+k+"_"+n;d+=WAVE.strHTMLTemplate("<input id='@id@' type='radio' name='@name@' @disabled@ @readonly@ value='@value@' @required@ @checked@>",
{id:K,name:f.name(),disabled:f.isEnabled()?"":"disabled",readonly:f.readonly()?"readonly":"",value:p,required:f.required()?"required":"",checked:WAVE.strSame(p,f.value())?"checked":""});d+=WAVE.strHTMLTemplate("<label for='@rbtid@'>@about@</label>",{rbtid:K,about:q})}h.innerHTML=d+"</fieldset>";for(var t in Object.keys(m))f="rbt"+k+"_"+t,WAVE.id(f).__fieldView=b,$("#"+f).change(c)}function v(b){var c=b.field(),f=b.DIV(),h="chk"+g(b),m="",a=c.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",
{ec:e.CLS_ERROR,error:a}));m+=WAVE.strHTMLTemplate("<label for='@chkid@' class='@cls@'>@about@</label>",{chkid:h,about:c.about(),cls:(c.required()?e.CLS_REQ:"")+" "+(c.isGUIModified()?e.CLS_MOD:"")});m+=WAVE.strHTMLTemplate("<input id='@id@' type='checkbox' name='@name@' value='true' @disabled@ @readonly@  @required@ @checked@>",{id:h,tp:c.password()?"password":"text",name:c.name(),disabled:c.isEnabled()?"":"disabled",readonly:c.readonly()?"readonly":"",required:c.required()?"required":"",checked:!0===
c.value()?"checked":""});f.innerHTML=m;WAVE.id(h).__fieldView=b;$("#"+h).change(function(){var a=this.checked,b=this.__fieldView.field();b.readonly()?r(this.__fieldView):b.value(a,!0)})}function t(b){var c=b.field(),f=b.DIV(),h="cbo"+g(b),m=WAVE.strHTMLTemplate("<label for='@cbid@' class='@cls@'>@about@</label>",{cbid:h,about:c.about(),cls:(c.required()?e.CLS_REQ:"")+" "+(c.isGUIModified()?e.CLS_MOD:"")}),a=c.validationError();null!==a&&(m+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,
error:a}));var m=m+WAVE.strHTMLTemplate("<select id='@id@' name='@name@' @disabled@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:h,name:c.name(),disabled:c.isEnabled()?"":"disabled",readonly:c.readonly()?"readonly":"",value:c.value(),placeholder:WAVE.strEmpty(c.placeholder())?"":c.placeholder(),required:c.required()?"required":""}),a=c.lookupDict(),d=Object.keys(a),k;for(k in Object.keys(a))m+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:d[k],
selected:WAVE.strSame(d[k],c.value())?"selected":"",descr:a[d[k]]});f.innerHTML=m+"</select>";WAVE.id(h).__fieldView=b;$("#"+h).change(function(){var a=this.value;this.__fieldView.field().value(a,!0)})}function x(b){if(!b.PUZZLE){var c=b.field(),f=b.DIV(),h=g(b),m="divPuzzle"+h,h="hiddenPuzzle"+h,a="",d=c.validationError();null!==d&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:e.CLS_ERROR,error:d}));a+=WAVE.strTemplate("<div id='@id@' class='@cls@'></div><input id='@idh@' type='hidden' name=@fname@ value=''></input>",
{id:m,idh:h,fname:c.name(),cls:e.CLS_PUZZLE});f.innerHTML=a;var f=c.value(),m=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(m),Image:WAVE.strDefault(f.Image,""),Help:WAVE.strDefault(f.Help,""),Question:WAVE.strDefault(f.Question,"")}),k=WAVE.id(h);m.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){c.value().Answer=a.value();k.value=JSON.stringify(c.value())});b.PUZZLE=m}}function r(b){var c=e.getControlType(b);WAVE.strSame(c,WAVE.RecordModel.CTL_TP_CHECK)?v(b):WAVE.strSame(c,WAVE.RecordModel.CTL_TP_RADIO)?
f(b):WAVE.strSame(c,WAVE.RecordModel.CTL_TP_COMBO)?t(b):WAVE.strSame(c,WAVE.RecordModel.CTL_TP_PUZZLE)?x(b):WAVE.strSame(c,WAVE.RecordModel.CTL_TP_TEXTAREA)?p(b):WAVE.strSame(c,WAVE.RecordModel.CTL_TP_HIDDEN)?b.DIV().innerHTML=WAVE.strHTMLTemplate("<input type='hidden' name='@fName@' value='@fValue@'>",{fName:b.field().name(),fValue:b.field().displayValue()}):n(b)}var e={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle"},b=null;e.getControlType=function(b){return b.getOrInferControlType()};
e.buildFieldViewAnew=function(b){r(b)};e.eventNotifyFieldView=function(b,c,e,h){r(b)};return e}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function g(g){return Math.log(g)/Math.LN10}var n={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},p=WAVE.Geometry;n.DataType={NUMBER:0,DATE:1};n.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};n.SquareFillType={TOP:1,BOTTOM:2};n.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};n.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};n.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};n.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var f=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
n.dvInfo=function(f,e,b,l,c){var n=f instanceof Date;this.isDate=function(){return n};var h=f;this.d0=function(a){"undefined"!=typeof a&&(h=a);return h};var m=e;this.d1=function(a){"undefined"!=typeof a&&(m=a);return m};var a=b;this.v0=function(b){"undefined"!=typeof b&&(a=b);return a};var d=l;this.v1=function(a){"undefined"!=typeof a&&(d=a);return d};var k=c;this.isLinear=function(a){"undefined"!=typeof a&&(k=a);return k};if(c)if(n){var p=(e.getTime()-f.getTime())/(l-b);this.d2v=function(a){return Math.floor(b+
(a.getTime()-f.getTime())/p)};this.v2d=function(a){return new Date(Math.ceil(f.getTime()+(a-b)*p))}}else p=(e-f)/(l-b),this.d2v=function(a){return b+(a-f)/p},this.v2d=function(a){return f+(a-b)*p};else if(n){c=g(f.getTime());e=g(e.getTime());var t=(l-b)/(e-c),q=b-t*c;this.d2v=function(a){return Math.floor(1>=a.getTime()?0:t*g(a.getTime())+q)};this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-q)/t)))}}else c=g(0>=f?1:f),e=g(0>=e?1:e),t=(l-b)/(e-c),q=b-t*c,this.d2v=function(a){return Math.floor(1>=
a?0:t*g(a)+q)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-q)/t))}};n.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};n.Axis=function(f,e){var b=this;WAVE.extend(b,WAVE.EventManager);e=e||{};this.chart=function(){return f};var l=e.dataType||n.DataType.NUMBER;this.dataType=function(a){"undefined"!=typeof a&&a!==l&&(l=a,b.fireChanged());return l};var c=e.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==c&&(c=a,b.fireChanged());return c};var g=e.max||null;this.max=function(a){"undefined"!==typeof a&&a!==g&&(g=a,b.fireChanged());return g};var h=e.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==h&&(h=a,b.fireChanged());return h};var m=e.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==m&&(m=a,b.fireChanged());return m};var a=!1!==e.isLinear;this.isLinear=function(c){"undefined"!=typeof c&&c!==a&&(a=c,b.fireChanged());
return a};var d=e.markType||n.AxisMarkType.AUTO;this.markType=function(a){"undefined"!==typeof a&&a!==d&&(d=a,b.fireChanged());return d};var k=5;this.tickLength=function(a){"undefined"!=typeof a&&a!==k&&(k=a,b.fireChanged());return k};var p=e.tickTextMargin||3;this.tickTextMargin=function(a){"undefined"!=typeof a&&a!==fVerticalMargin&&(p=a,b.fireChanged());return p};var t;this.dvInfo=function(a){"undefined"!=typeof a&&(t=a);return t};var q;this.ticks=function(a){"undefined"!==typeof a&&(q=a);return q};
this.fireChanged=function(){b.eventInvoke("EVT_CHANGED")}};n.Axis.prototype.toSeconds=function(f){return f.valueOf()/1E3};n.Axis.prototype.fromSeconds=function(f){return new Date(1E3*f)};n.Axis.prototype.getVTimeTicks=function(f,e,b,l,c,g){b=this.toSeconds(b);var h=this.toSeconds(l)-b,m=e-f;l=h/m;var h=this.calcTimeTickLength(m,h,c,g),a=h.dThreshhold,h=h.vTickLength,a=(Math.floor(b/a)*a-b)/l,d=[],k=g+c/2;for(c=m-(g+c/2);a<=e;)a>=k&&a<=c&&d.push({vTick:f+a,dTick:this.fromSeconds(b+a*l)}),a+=h;return d};
n.Axis.prototype.calcTimeTickLength=function(g,e,b,l){var c=e/g,n=e/Math.floor(g/(b+2*l));g=f.wFirst(function(b){return n<b});return{vTickLength:g/c,dThreshhold:g}};n.Axis.prototype.getVLog10Ticks=function(f,e,b,l,c,g){var h=e-f;l=Math.ceil(Math.log(l-b)/Math.LN10);e=h/l;var m=[],a=g+c/2;c=h-(g+c/2);g=0;for(var h=f,d=1;g<=l;g++,h+=e,d*=10)h>=a&&h<=c&&m.push({vTick:f+h,dTick:b+d});return m};n.Axis.prototype.getVTicks=function(f,e,b,l,c,g){var h=[],m=l-b,a=e-f;l=m/a;var m=this.calcTicksLength(a,m,c,
g),d=m.dTickLength,m=m.vTickLength,d=(Math.ceil(b/d)*d-b)/l,k=g+c/2;for(c=a-(g+c/2);d<=e;)d>=k&&d<=c&&h.push({vTick:f+d,dTick:b+d*l}),d+=m;return h};n.Axis.prototype.calcTicksLength=function(f,e,b,l){var c=e/f,g=WAVE.arrayWalkable([1,2,3,5,10]);f=e/(Math.floor(f/(b+l))-1);e=Math.pow(10,Math.floor(Math.log(f)/Math.LN10));var h=f/e,g=g.wFirst(function(b){return h<b})*e;return{vTickLength:g/c,dTickLength:g}};n.Axis.prototype.labelValToStr=function(f){return this.dataType()==n.DataType.NUMBER?WAVE.siNum(f,
2):WAVE.toUSDateTimeString(f)};n.Axis.prototype.calcLabelRc=function(f,e,b){this.dataType()==n.DataType.NUMBER?(e=this.labelValToStr(e),b=this.labelValToStr(b),b=b.length>=e.length?b:e):b=this.labelValToStr(e);b=WAVE.SVG.createText(b,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});f.appendChild(b);e=b.getBBox();f.removeChild(b);return e};n.XZone=function(f){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return f};var b=!0;this.enabled=function(l){"undefined"!=typeof l&&
l!==b&&(b=l,e.eventInvoke("EVT_CHANGED"));return b}};n.XZone.prototype.getHeight=function(f){var e=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}),b=WAVE.arrayWalkable(e.wSelect(function(b){return{axis:b.k,height:b.k.getHeight(f,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isBottom()},function(b){return b.height}).wGroupAggregate(function(b,e,l){return(e||0)+l}),e={top:0,bottom:0};if(!this.enabled())return e;for(b=b.getWalker();b.moveNext();){var l=
b.current();!0===l.k?e.bottom=l.v:e.top=l.v}return e};n.XZone.prototype.draw=function(f,e){for(var b in e){var l=e[b],l=WAVE.SVG.createRect(l.left(),l.top(),l.width(),l.height(),{class:"wvSvgBkgr wvXZoneBackground"});f.appendChild(l)}b=this.chart().seriesListWalkable().wGroup(function(a){return a.xAxis()},function(a){return a.dataSet()}).getWalker();for(var l=e.top.bottom(),c=e.bottom.top();b.moveNext();){var g=b.current(),h=g.k.getHeight(f,g.v),m;1==g.k.isBottom()?(m=new p.Rectangle(new p.Point(e.bottom.left(),
c),new p.Point(e.bottom.right(),c+h)),c+=h):(m=new p.Rectangle(new p.Point(e.top.left(),l-h),new p.Point(e.top.right(),l)),l-=h);g.k.draw(f,m,g.v)}};n.XAxis=function(f,e){n.Axis.call(this,f,e);var b=this;e=e||{};var l=e.verticalMargin||3;this.verticalMargin=function(c){"undefined"!=typeof c&&c!==l&&(fverticalMargin=c,b.fireChanged());return l};var c=!1!==e.isBottom;this.isBottom=function(e){"undefined"!=typeof e&&e!==c&&(c=e,b.fireChanged());return c}};n.XAxis.prototype=Object.create(n.Axis.prototype);
n.XAxis.prototype.constructor=n.XAxis;n.XAxis.prototype.d2v=function(f){return this.dvInfo().d2v(f)};n.XAxis.prototype.v2d=function(f){return this.dvInfo().v2d(f)};n.XAxis.prototype.draw=function(f,e,b){var l=this.getMinMax(b);this.dvInfo(new n.dvInfo(l.min,l.max,e.left(),e.right(),this.isLinear()));l=this.isBottom()?WAVE.SVG.createLine(e.left(),e.top(),e.right(),e.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.bottom(),e.right(),e.bottom(),{class:"wvAxisLine"});f.appendChild(l);this.markAxis(f,
e,b)};n.XAxis.prototype.getHeight=function(f,e){this.minMax=this.getMinMax(e);var b;!this.minMax.min&&0!=this.minMax.min||!this.minMax.max&&0!=this.minMax.max?b=0:(b=this.calcLabelRc(f,this.minMax.min,this.minMax.max),b=Math.ceil(b.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+b};n.XAxis.prototype.getMinMax=function(f){var e=this.min()||f.wSelect(function(b){return b.getMinX()}).wWhere(function(b){return null!=b}).wMin();null===e&&(e=this.dataType()==n.DataType.DATE?
new Date:0);e=this.dataType()==n.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();f=this.max()||f.wSelect(function(b){return b.getMaxX()}).wMax();null===f&&(f=this.dataType()==n.DataType.DATE?new Date:0);f=this.dataType()==n.DataType.DATE?new Date(f.getTime()+1E3*this.maxMargin()):f+this.maxMargin();return this.minMax={min:e,max:f}};n.XAxis.prototype.markAxis=function(f,e,b){var l,c=this.getMinMax(b);if((this.minMax.min||0==this.minMax.min)&&(this.minMax.max||0==this.minMax.max)){var g=
this.calcLabelRc(f,c.min,c.max),h=g.width,g=g.height;if(this.markType()==n.AxisMarkType.AUTO)l=this.dataType()==n.DataType.DATE?this.getVTimeTicks(e.left(),e.right(),c.min,c.max,h,5):this.getVTicks(e.left(),e.right(),c.min,c.max,h,5);else if(this.markType()==n.AxisMarkType.EXACT_BY_POINTS){b=b[0];l=[];for(var m in b)c=b[m],l.push({vTick:this.d2v(c.x),dTick:c.x})}this.ticks(l);for(m in l)b=l[m],c=this.isBottom()?WAVE.SVG.createLine(b.vTick,e.top(),b.vTick,e.top()+this.tickLength(),{class:"wvAxisTickLine"}):
WAVE.SVG.createLine(b.vTick,e.bottom(),b.vTick,e.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),f.appendChild(c),c=this.labelValToStr(b.dTick),c=this.isBottom()?WAVE.SVG.createText(c,b.vTick,e.top()+this.tickTextMargin()+g,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(c,b.vTick,e.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),f.appendChild(c),h=c.getBBox(),c.setAttribute("x",b.vTick-h.width/2)}};n.YZone=function(f){var e=this;WAVE.extend(e,WAVE.EventManager);
this.chart=function(){return f};var b=!0;this.enabled=function(f){"undefined"!=typeof f&&f!==b&&(b=f,e.eventInvoke("EVT_CHANGED"));return b};this.getWidth=function(f){var c=e.chart().seriesListWalkable().wGroup(function(b){return b.yAxis()},function(b){return b.dataSet()}),g=WAVE.arrayWalkable(c.wSelect(function(b){return{axis:b.k,width:b.k.getWidth(f,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isLeft()},function(b){return b.width}).wGroupAggregate(function(b,a,c){return(a||0)+c}),c={left:0,
right:0};if(!b)return c;for(g=g.getWalker();g.moveNext();){var h=g.current();!0===h.k?c.left=h.v:c.right=h.v}return c};this.draw=function(b,c){for(var f in c){var g=c[f],g=WAVE.SVG.createRect(g.left(),g.top(),g.width(),g.height(),{class:"wvSvgBkgr wvYZoneBackground"});b.appendChild(g)}f=e.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var g=c.left.right(),m=c.right.left();f.moveNext();){var a=f.current(),d=a.k.getWidth(b,a.v),k;1==
a.k.isLeft()?(k=new p.Rectangle(new p.Point(g-d,c.left.top()),new p.Point(g,c.left.bottom())),g-=d):(k=new p.Rectangle(new p.Point(m,c.left.top()),new p.Point(m+d,c.left.bottom())),m+=d);a.k.draw(b,k,a.v)}}};n.YAxis=function(f,e){n.Axis.call(this,f,e);var b=this;e=e||{};var g=e.horizontalMargin||3;this.horizontalMargin=function(c){"undefined"!=typeof c&&c!==g&&(g=c,b.fireChanged());return g};var c=e.minWidth||0;this.minWidth=function(e){"undefined"!=typeof e&&e!==c&&(c=e,b.fireChanged());return c};
var p=!1!==e.isLeft;this.isLeft=function(c){"undefined"!=typeof c&&c!==p&&(p=c,b.fireChanged());return p}};n.YAxis.prototype=Object.create(n.Axis.prototype);n.YAxis.prototype.constructor=n.YAxis;n.YAxis.prototype.d2v=function(f){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(f)};n.YAxis.prototype.v2d=function(f){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-f)};n.YAxis.prototype.markAxis=function(f,e,b){var g;if(this.markType()==n.AxisMarkType.AUTO){g=this.getMinMax(b);
b=this.calcLabelRc(f,g.min,g.max).height;var c=.2*b;g=this.dataType()==n.DataType.DATE?this.getVTimeTicks(e.top(),e.bottom(),g.min,g.max,b,c):this.isLinear()?this.getVTicks(e.top(),e.bottom(),g.min,g.max,b,c):this.getVLog10Ticks(e.top(),e.bottom(),g.min,g.max,b,c)}else if(this.markType()==n.AxisMarkType.EXACT_BY_POINTS){b=b[0];for(var p in b)c=b[p],g.push({vTick:this.d2v(c.y),dTick:c.y})}this.ticks(g);b=0;c=[];for(p in g){var h=g[p],m=e.top()+e.bottom()-h.vTick,a;a=this.isLeft()?WAVE.SVG.createLine(e.right()-
this.tickLength(),m,e.right(),m,{class:"wvAxisTickLine"}):WAVE.SVG.createLine(e.left(),m,e.left()+this.tickLength(),m,{class:"wvAxisTickLine"});f.appendChild(a);h=this.labelValToStr(h.dTick);h=this.isLeft()?WAVE.SVG.createText(h,e.right()-this.tickTextMargin()-this.tickLength(),m,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(h,e.left()+this.tickLength()+this.tickTextMargin(),m,{class:"wvAxisLabel wvYAxisLabel"});f.appendChild(h);a=h.getBBox();h.setAttribute("y",m+a.height/3);c.push(h);a.width>
b&&(b=a.width)}if(!this.isLeft())for(p in c)f=c[p],e=parseFloat(f.getAttribute("x")),e+=b,f.setAttribute("x",e)};n.YAxis.prototype.draw=function(f,e,b){var g=this.getMinMax(b);this.dvInfo(new n.dvInfo(g.min,g.max,e.top(),e.bottom(),this.isLinear()));g=this.isLeft()?WAVE.SVG.createLine(e.right(),e.top(),e.right(),e.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.top(),e.left(),e.bottom(),{class:"wvAxisLine"});f.appendChild(g);this.markAxis(f,e,b)};n.YAxis.prototype.getWidth=function(f,
e){this.minMax=this.getMinMax(e);var b=this.calcLabelRc(f,this.minMax.min,this.minMax.max),b=this.tickLength()+this.horizontalMargin()+Math.ceil(b.width);return Math.max(b,this.minWidth())};n.YAxis.prototype.getMinMax=function(f){var e=this.min()||f.wSelect(function(b){return b.getMinY()}).wWhere(function(b){return null!=b}).wMin(),e=this.dataType()==n.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();f=this.max()||f.wSelect(function(b){return b.getMaxY()}).wMax();f=this.dataType()==
n.DataType.DATE?new Date(f.getTime()+1E3*this.maxMargin()):f+this.maxMargin();return this.minMax={min:e,max:f}};n.LZone=function(f,e){function b(){g.eventInvoke("EVT_CHANGED")}e=e||{};var g=this;WAVE.extend(g,WAVE.EventManager);this.chart=function(){return f};var c=!1!==e.enabled;this.enabled=function(a){"undefined"!=typeof a&&a!==c&&(c=a,b());return c};var p=e.legendMargin||10;this.legendMargin=function(a){"undefined"!=typeof a&&a!==p&&(p=a,b());return p};var h=e.seriesMargin||3;this.seriesMargin=
function(a){"undefined"!=typeof a&&a!==h&&(h=a,b());return h};var m=e.prefixLength||10;this.prefixLength=function(a){"undefined"!=typeof a&&a!==m&&(m=a,b());return m};var a=e.rowSpace||3;this.rowSpace=function(c){"undefined"!=typeof c&&c!==a&&(a=c,b());return a};var d=e.corner||n.RectCorner.RIGHTTOP;this.corner=function(a){"undefined"!=typeof a&&a!==d&&(d=a,b());return d}};n.LZone.prototype.getSize=function(f){var e=this.chart().seriesListWalkable().wSelect(function(b){return b.title()||""}).wMax(function(b,
c){return b.length>c.length}),b=WAVE.SVG.createText(e,0,0,{class:"wvLegendName",visibility:"hidden"});f.appendChild(b);e=b.getBBox();f.removeChild(b);f=this.rowSpace()+this.prefixLength()+this.rowSpace()+e.width+this.rowSpace();e=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+e.height);return{w:f,h:e}};n.LZone.prototype.drawLegendPrefix=function(f,e,b){var g=(e.top()+e.bottom())/2;e=WAVE.SVG.createPath({d:"M"+e.left()+","+g+" L"+(e.left()+this.prefixLength())+","+g,class:b.lineClass()});
f.appendChild(e)};n.LZone.prototype.draw=function(f,e){if(this.enabled()){var b=this,g=this.chart().seriesListWalkable(),c=WAVE.SVG.createRect(e.left(),e.top(),e.width(),e.height(),{class:"wvLZoneBackground"});f.appendChild(c);var n=e.top()+this.seriesMargin();g.wEach(function(c){var g=WAVE.SVG.createGroup({class:c.class()});f.appendChild(g);var a=WAVE.SVG.createText(c.title(),e.left()+b.rowSpace()+b.prefixLength()+b.rowSpace(),n,{class:"wvLegendName"});g.appendChild(a);var d=a.getBBox();a.setAttribute("y",
n+3*d.height/4);a=new p.Rectangle(new p.Point(e.left()+b.rowSpace(),n),new p.Point(e.left()+b.rowSpace()+b.prefixLength(),n+d.height));b.drawLegendPrefix(g,a,c);n+=d.height+2*b.seriesMargin()})}};var v=0;n.SZone=function(f,e){function b(){g.eventInvoke("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);e=e||{};this.chart=function(){return f};var c=e.chartType||n.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==c&&(c=a,b());return c};var p=e.squareFillType||n.SquareFillType.BOTTOM;
this.squareFillType=function(a){"undefined"!==typeof a&&a!==p&&(p=a,b());return p};var h=e.pointType||n.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,b());return h};var m=e.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,b());return m};var a=e.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(c){"undefined"!==typeof c&&c!==a&&(a=c,b());return a};var d=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==
typeof a&&a!==d&&(d=a,b());return d};var k=e.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==k&&(k=a,b());return k};var u=e.barClass||"wvSeriesRect";this.barClass=function(a){"undefined"!==typeof a&&a!==u&&(u=a,b());return u};var t=e.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==t&&(t=a,b());return t};var q=e.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==q&&(q=a,b());return q};var v=e.barMargin||3;this.barMargin=function(a){"undefined"!==
typeof a&&a!==q&&(v=a,b());return v};var x=e.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==x&&(x=a);return x};var A=e.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==A&&(A=a);return A};var w=e.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==w&&(w=a,b());return w};var C=e.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==
typeof a&&a!==C&&(C=a,b());return C};var B=e.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==B&&(B=a,b());return B};var z=e.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==z&&(z=a,b());return z};var P=e.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==P&&(P=a,b());return P};var L=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==L&&(L=a,b());return L};
this.showDefaultRuler=function(a){var c=0<E.length;return"undefined"!==typeof a&&a!==c?(a?g.attachToRulerScope(""):g.detachFromRulerScope(""),E.length&&b(),a):c};var E=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(E)};this.attachToRulerScope=function(a){-1===E.indexOf(a)&&(E.push(a),b())};this.detachFromRulerScope=function(a){a=E.indexOf(a);-1!==a&&(E.splice(a,1),b())};var D=!1!==e.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==D&&(D=a,b());return D};
var G=!1!==e.rulerCheckYContains;this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==G&&(G=a,b());return G};var J=null;this.lastArea=function(){return J};var H=[],U=WAVE.arrayWalkable(H),N=[],S=WAVE.arrayWalkable(N),O=[],I=WAVE.arrayWalkable(O);this.addVTitle=function(a){H.push(a)};this.addVPoint=function(a){N.push(a)};this.addVLine=function(a){O.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=U.wWhere(function(b){return!(b.right()<
a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=S.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),f=I.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,
b.y1,b.x2,b.y2)}).wSum();return c+d+e+2*f};this.draw=function(a,b){J=b;H.splice(0,H.length);N.splice(0,N.length);O.splice(0,O.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var e=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});
a.appendChild(e);var c=g.chart().seriesListWalkable(),d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),f=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});e.appendChild(d)}});f.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});
e.appendChild(d)}});c.wGroup(function(a){return a.chartType()},function(a){return a}).wEach(function(c){switch(c.k){case n.ChartType.BAR:var d=g.barWidth(),f=g.barGroupMargin(),h=g.barMargin(),k=c.v.wCount(),m=c.v.wFirst();if(m.barBase()==n.RectSide.BOTTOM){var p=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"==typeof p)break;var r=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"==typeof r)break;for(var p=p.dataSet().getMinX(),
r=r.dataSet().getMaxX(),q=m.xAxis().dvInfo(),m=q.d2v(p),r=q.d2v(r),k=Math.floor((r-m+f)/(k*(d+h)-h+f)),f=(r-m+f)/k,r=0;r<k;r++){var y=m+f*r,w=y;c.v.wEach(function(a){var c=q.v2d(y),c=a.getVY(c),c="M"+w+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});e.appendChild(a);a.appendChild(c);w+=d+h})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawAllButTitle(a,
d,b)})}});c.wWhere(function(a){return a.chartType()&n.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawPointTitles(a,d,b)})}};var t=function(f,e){function b(){g.invokeEvent("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);e=e||{};this.chart=function(){return f};var c="undefined"!==typeof e.id?e.id:(++v).toString();this.id=function(){return c};var p=e.title||"";this.title=function(a){"undefined"!=typeof a&&a!==p&&(p=a,b());return p};
var h=e.class||"";this.class=function(a){"undefined"!=typeof a&&a!==h&&(h=a,b());return h};var m=e.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,b());return m||g.chart().sZone().lineClass()};var a=e.lineSquareClass;this.lineSquareClass=function(c){"undefined"!==typeof c&&c!==a&&(a=c,b());return a||g.chart().sZone().lineSquareClass()};var d=e.barClass;this.barClass=function(a){"undefined"!==typeof a&&a!==d&&(d=a,b());return d||g.chart().sZone().barClass()};var k=e.chartType;
this.chartType=function(a){"undefined"!==typeof a&&a!==k&&(k=a,b());return k||g.chart().sZone().chartType()};var u=e.squareFillType;this.squareFillType=function(a){"undefined"!==typeof a&&a!==u&&(u=a,b());return u||g.chart().sZone().squareFillType()};var t=e.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==t&&(t=a,b());return t||g.chart().sZone().pointType()};var q=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,b());return q||g.chart().sZone().pointClass()};
var x=e.pointSize;this.pointSize=function(a){"undefined"!==typeof a&&a!==x&&(x=a,b());return x||g.chart().sZone().pointSize()};var Q=n.RectSide.BOTTOM;this.barBase=function(a){"undefined"!=typeof a&&a!==Q&&(Q=a,b());return Q||g.chart().sZone().barBase()};var A=new n.DataSet;A.eventBind("EVT_CHANGED",function(){g.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return A};var w=e.xAxis;this.xAxis=function(a){"undefined"!=typeof a&&a!==w&&(w&&w.eventUnbind("EVT_CHANGED",b),w=a,w.eventBind("EVT_CHANGED",
b),b());return w||g.chart().xAxis()};var C=e.yAxis;this.yAxis=function(a){"undefined"!=typeof a&&a!==C&&(C&&C.eventUnbind("EVT_CHANGED",b),C=a,C.eventBind("EVT_CHANGED",b),b());return C||g.chart().yAxis()};var B=e.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==B&&(B=a);return B||g.chart().sZone().showPointTooltip()};var z=e.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==z&&(z=a);return z||g.chart().sZone().pointTooltipFormat()};var P=
e.showPointTitle;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==P&&(P=a,b());return P||g.chart().sZone().showPointTitle()};var L=e.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==L&&(L=a,b());return L||g.chart().sZone().pointTitleFormat()};var E=e.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==E&&(E=a,b());return E||f.sZone().pointTitleClass()};var D=e.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&
a!==D&&(D=a,b());return D||f.sZone().pointTitleAngle()};var G=e.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==G&&(G=a,b());return G||f.sZone().pointTitleMargin()};var J=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==J&&(J=a,b());return!1===J?!1:J||f.sZone().showPointTitleLeg()}};t.prototype.getDY=function(f){var e=this.dataSet().getPointByX(f);if(null!=e)return e.y;e=this.dataSet().getNearestNeighbours(f);return null==e?null:
null==e.left?e.right.y:null==e.right?e.left.y:(f-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y};t.prototype.getVY=function(f){f=this.getDY(f);return this.yAxis().d2v(f)};t.prototype.foreachPoint=function(f){var e=this,b=this.xAxis(),g=this.yAxis();e.dataSet().forEach(function(c){var n=Math.round(b.d2v(c.x)),h=Math.round(g.d2v(c.y));isNaN(n)||isNaN(h)||f(n,h,c.x,c.y,c.title,e)})};t.prototype.drawAllButTitle=function(f,e,b,g){var c=this;if(this.chartType()&n.ChartType.LINE||this.chartType()&
n.ChartType.LINE_SQUARE){var p="",h=null,m,a;c.foreachPoint(function(b,d,e,f,g,l){null==h?(h=b,e="M"):(e="L",c.chart().sZone().addVLine({x1:m,y1:a,x2:b,y2:d}));p+=e+b+","+d+" ";m=b;a=d});""!=p&&this.chartType()&n.ChartType.LINE_SQUARE&&(p=this.squareFillType()==n.SquareFillType.BOTTOM?p+("V"+b.bottom()+" H"+h+" Z"):p+("V"+b.top()+" H"+h+" Z"));g=WAVE.SVG.createPath({d:p,class:this.chartType()&n.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});e.appendChild(g)}if(this.chartType()&n.ChartType.SPLINE||
this.chartType()&n.ChartType.SPLINE_SQUARE){var p="",d="M",k=0,u=[],h=null;c.foreachPoint(function(a,b,c,e,f,g){null==h&&(h=a);"M"==d?(p="M"+a+","+b+" ",d="C"):"C"==d?(u.unshift({x:a,y:b}),k++,3==k&&(a=u.pop(),b=u.pop(),c=u.pop(),p+="C"+a.x+","+a.y+" "+b.x+","+b.y+" "+c.x+","+c.y+" ",k=0,d="S")):"S"==d&&(u.unshift({x:a,y:b}),k++,2==k&&(b=u.pop(),c=u.pop(),p+="S"+b.x+","+b.y+" "+c.x+","+c.y+" ",k=0))});if("C"==d)if(1==k)g=u.pop(),p+="L"+g.x+","+g.y;else{if(2==k){g=u.pop();var t=u.pop(),p=p+("Q"+g.x+
","+g.y+" "+t.x+","+t.y)}}else"S"==d&&1==k&&(g=u.pop(),p+="T"+g.x+","+g.y);""!=p&&this.chartType()&n.ChartType.SPLINE_SQUARE&&(p+="V"+b.bottom()+" H"+h+" Z");g=WAVE.SVG.createPath({d:p,class:this.chartType()&n.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});e.appendChild(g)}this.chartType()&n.ChartType.POINT&&c.foreachPoint(function(a,d,g,l,h,k){c.drawPoint(f,e,b,a,d,g,l,h,k)})};t.prototype.drawPointTitles=function(f,e,b){var g=this;this.chartType()&n.ChartType.POINT&&this.foreachPoint(function(c,
n,h,m,a,d){g.drawPointTitle(f,e,b,c,n,h,m,a)})};t.prototype.drawPoint=function(f,e,b,g,c,p,h,m){var a;switch(this.pointType()){case n.PointType.CIRCLE:a=this.drawPointCircle(g,c,p,h);break;case n.PointType.RECT:a=this.drawPointRect(g,c,p,h);break;case n.PointType.TRI:a=this.drawPointTriangle(g,c,p,h)}var d=this;a&&(a.addEventListener("mouseover",function(a){d.chart().onSeriesMouseOver({originalEvt:a,vx:g,vy:c,dx:p,dy:h,title:m,series:d})}),a.addEventListener("mouseout",function(a){d.chart().onSeriesMouseOut({originalEvt:a,
vx:g,vy:c,dx:p,dy:h,title:m,series:d})}),a.addEventListener("click",function(a){d.chart().onSeriesClick({originalEvt:a,vx:g,vy:c,dx:p,dy:h,title:m,series:d})}),e.appendChild(a))};t.prototype.drawPointTitle=function(f,e,b,g,c,n,h,m){if(this.showPointTitle()&&m){var a=WAVE.strTemplate(this.pointTitleFormat(),{vx:g,vy:c,dx:n,dy:h,title:m,series:this.title()}),d=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+","+g+","+c+")"}),a=WAVE.SVG.createText(a,g,c);
d.appendChild(a);f.appendChild(d);var k=d.getBBox();f.removeChild(d);var p=k.x,t=k.y,q=k.width,v=k.height,p=p-2,t=t-2,q=q+4,v=v+4,k=g-p;f=c-t;for(var x=c-(t+v/2),A=g+this.pointTitleMargin(),p=WAVE.Geometry.toRectWH(p+(A-p),t+x,q,v),t=this.chart().sZone(),q=Number.MAX_VALUE,v=0;v<2*Math.PI;v+=Math.PI/4){x=WAVE.Geometry.rotateRectAroundCircle(g,c,15,p.width(),p.height(),v);A=t.getTitleRcPenalty(x,b);if(0==A){p=x;break}A<q&&(q=A,p=x)}t.addVTitle(p);b=WAVE.SVG.createRect(p.left(),p.top(),p.width(),p.height(),
{rx:4,ry:4});a.setAttribute("x",p.left()+k);a.setAttribute("y",p.top()+f);var w=this;d.addEventListener("mouseover",function(a){w.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:g,vy:c,dx:n,dy:h,title:m,series:w})});d.addEventListener("mouseout",function(a){w.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:g,vy:c,dx:n,dy:h,title:m,series:w})});d.addEventListener("click",function(a){w.chart().onSeriesPointTitleClick({originalEvt:a,vx:g,vy:c,dx:n,dy:h,title:m,series:w})});d.insertBefore(b,
a);this.showPointTitleLeg()&&(a=(new WAVE.Geometry.Point(g,c)).toPolarPoint(p.centerPoint()).theta(),a=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(p,a),a=WAVE.SVG.createLine(a.x(),a.y(),g,c),d.insertBefore(a,b));e.appendChild(d)}};t.prototype.calcTitlePos=function(g,e,b,f){var c=null,n=null,h,m,a=b.width*b.height;h=g+5;m=e-5-b.height;var d=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),h,m,b.width,b.height);d!=a?(h=g-5-b.width,m=e-5-b.height,d=WAVE.Geometry.overlapAreaWH(f.left(),
f.top(),f.width(),f.height(),h,m,b.width,b.height),d!=a?(h=g+5,m=e+5,d=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),h,m,b.width,b.height),d!=a?(h=g-5-b.width,m=e+5,d=WAVE.Geometry.overlapAreaWH(f.left(),f.top(),f.width(),f.height(),h,m,b.width,b.height),d==a&&(c=h,n=m)):(c=h,n=m)):(c=h,n=m)):(c=h,n=m);return new WAVE.Geometry.Point(c,n)};t.prototype.drawPointCircle=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createCircle(f,e,b,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-
b,e-b,2*b,2*b));return g};t.prototype.drawPointRect=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createRect(f-b,e-b,2*b,2*b,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-b,e-b,2*b,2*b));return g};t.prototype.drawPointTriangle=function(f,e,b,g){b=this.pointSize();g=WAVE.SVG.createPath({d:"M"+(f-b)+","+(e+b)+" H"+(f+b)+" L"+f+","+(e-b)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(f-b,e-b,2*b,2*b));return g};t.prototype.toString=
function(){return"Series "+this.title()};n.DataSet=function(){var f=this;WAVE.extend(f,WAVE.EventManager);var e=[],b=WAVE.arrayWalkable(e);this.feedWalkable=function(b,c){if(!c||c>f.MAX_POINTS_QTY)c=f.MAX_POINTS_QTY;f.removeAllPoints();for(var g=b.getWalker(),h=0;g.moveNext()&&h++<c;){var m=g.current();e.push({x:m.x,y:m.y,t:m.t})}f.eventInvoke("EVT_CHANGED")};this.addPoint=function(b,c,g){e.push({x:b,y:c,title:g});f.eventInvoke("EVT_CHANGED")};this.forEach=function(e){b.wEach(e)};this.removeAllPoints=
function(){0<e.length&&(e.splice(0,e.length),f.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(b){var c;do{c=!1;for(var g=0;g<e.length;g++)if(b(e[g])){e.splice(g,1);c=!0;break}}while(c);f.eventInvoke("EVT_CHANGED")};this.removePointByX=function(b){for(var c=0;c<e.length;c++)if(e[c].x==b){e.splice(c,1);break}};this.length=function(){return e.length};this.getPoint=function(b){return e[b]};this.getPointByX=function(b){for(var c=0;c<e.length;c++){var f=e[c];if(f.x==b)return f}};this.getMinX=
function(){return b.wSelect(function(b){return b.x}).wMin()};this.getMaxX=function(){return b.wSelect(function(b){return b.x}).wMax()};this.getMinY=function(){return b.wSelect(function(b){return b.y}).wMin()};this.getMaxY=function(){return b.wSelect(function(b){return b.y}).wMax()};this.getNearestNeighbours=function(f){if(0==e.length)return null;var c=e[0],g=e[e.length-1];if(f<c.x)return{left:null,right:c};if(f>g.x)return{left:g,right:null};c=b.wFirstIdx(function(b){return f<b.x});return{left:e[c-
1],right:e[c]}}};n.DataSet.prototype.MAX_POINTS_QTY=44100;var x=0;n.Chart=function(f){function e(){K&&0==q&&(c.draw(),K=!1)}function b(){K=!0;e()}function g(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!=c.nodeName?a.removeChild(c):b++}}var c=this;WAVE.extend(c,WAVE.EventManager);var v=++x;this.id=function(){return v};var h=f;this.svgEl=function(){return h};$(window).resize(function(){c.draw()});this.svgEl=function(a){"undefined"!=typeof a&&a!==h&&(h=a,c.draw());return h};var m=
new n.XZone(this);m.eventBind("EVT_CHANGED",b);this.xZone=function(){return m};var a=new n.YZone(this);a.eventBind("EVT_CHANGED",b);this.yZone=function(){return a};var d=new n.SZone(this);d.eventBind("EVT_CHANGED",b);this.sZone=function(){return d};var k=new n.LZone(this);k.eventBind("EVT_CHANGED",b);this.lZone=function(){return k};var u=new n.XAxis(c);u.eventBind("EVT_CHANGED",b);this.xAxis=function(a){"undefined"!=typeof a&&a!==u&&(u=a,c.draw());return u};var R=new n.YAxis(c);R.eventBind("EVT_CHANGED",
b);this.yAxis=function(a){"undefined"!=typeof a&&a!==R&&(R=a,c.draw());return R};var q=0,K=!0;this.beginUpdate=function(){q++};this.endUpdate=function(){0<q&&q--;e()};this.beginUpdate();var Q=[],A=WAVE.arrayWalkable(Q);this.seriesListWalkable=function(){return A};this.getSeries=function(a){return A.wFirst(function(b){return b.id()==a})};this.addSeries=function(a){a=new t(c,a);a.eventBind("EVT_CHANGED",b);Q.push(a);b();return a};this.removeSeries=function(a){var c=A.wFirstIdx(function(b){return b==
a});-1!=c&&(Q.splice(c,1),a.eventUnbind("EVT_CHANGED",b),b())};this.clearSeries=function(){if(0!=Q.length){for(var a in Q)Q[a].eventUnbind("EVT_CHANGED",b);Q.splice(0,Q.length);b()}};this.draw=function(){var a=h.getBoundingClientRect(),b=a.width,d=a.height;try{var e=c.splitArea(h,b,d)}catch(f){console.error(f.message);return}g(h,!0);b=WAVE.SVG.createRect(0,0,b,d,{class:"wvSvgBkgr"});h.appendChild(b);c.xZone().draw(h,e.xZone);c.yZone().draw(h,e.yZone);c.sZone().draw(h,e.sZone);c.lZone().draw(h,e.lZone);
var k=WAVE.Geometry.toRectWH(e.sZone.left()+a.left,e.sZone.top()+a.top,e.sZone.width(),e.sZone.height()),e=c.sZone().rulerScopes();if(0<e.length)for(var m in e)WAVE.GUI.rulerSet({element:h,scope:e[m],elementCfg:{getTxt:function(b){var d=c.xAxis(),e=c.yAxis();c.sZone().lastArea();if(k.contains(b.clientPoint)){var f=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,f=d.v2d(f),g=e.v2d(g);b.divHint.style.visibility="visible";return d.labelValToStr(f)+"; "+e.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var d=c.xAxis(),e=c.yAxis();c.sZone();var f=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,d=d.v2d(f),e=e.v2d(g),e={dataPoint:new WAVE.Geometry.Point(d,e)};e.isInParentRc=k.contains(b.clientPoint);return e},getSlaveInfo:function(b){var d=c.xAxis(),e=c.yAxis(),f=c.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();d=d.d2v(g)+a.left;e=e.d2v(b)+a.top;e={clientPoint:new WAVE.Geometry.Point(d,e)};e.isInParentRc=(!f.rulerCheckXContains()||e.clientPoint.x()>=
k.left()&&e.clientPoint.x()<=k.right())&&(!f.rulerCheckYContains()||e.clientPoint.y()>=k.top()&&e.clientPoint.y()<=k.bottom());return e},parentRc:k}});else WAVE.GUI.rulerUnset({element:h})};this.splitArea=function(a,b,d){var e=c.xZone().getHeight(a),f=c.yZone().getWidth(a),g=new p.Point(0,0),h=new p.Point(Math.round(b),Math.round(d));e.top&&g.y(g.y()+e.top);e.bottom&&h.y(h.y()-e.bottom);f.left&&g.x(g.x()+f.left);f.right&&h.x(h.x()-f.right);var e={top:new p.Rectangle(new p.Point(g.x(),0),new p.Point(h.x(),
g.y())),bottom:new p.Rectangle(new p.Point(g.x(),h.y()),new p.Point(h.x(),d))},f={left:new p.Rectangle(new p.Point(0,g.y()),new p.Point(g.x(),h.y())),right:new p.Rectangle(new p.Point(h.x(),g.y()),new p.Point(b,h.y()))},k=new p.Rectangle(g,h);0<g.x()&&(k.corner1().x(k.left()+1),e.top.corner1().x(k.left()),e.bottom.corner1().x(k.left()));0<g.y()&&(k.corner1().y(k.top()+1),f.left.corner1().y(k.top()),f.right.corner1().y(k.top()));h.x()<b&&(k.corner2().x(k.right()-1),e.top.corner2().x(k.right()),e.bottom.corner2().x(k.right()));
h.y()<d&&(k.corner2().y(k.bottom()-1),f.left.corner2().y(k.bottom()),f.right.corner2().y(k.bottom()));a=c.lZone().getSize(a);var l,m;switch(c.lZone().corner()){case n.RectCorner.LEFTTOP:l=k.left()+c.lZone().legendMargin();m=k.top()+c.lZone().legendMargin();break;case n.RectCorner.RIGHTTOP:l=k.right()-c.lZone().legendMargin()-a.w;m=k.top()+c.lZone().legendMargin();break;case n.RectCorner.LEFTBOTTOM:l=k.left()+c.lZone().legendMargin();m=k.bottom()-a.h-c.lZone().legendMargin();break;case n.RectCorner.RIGHTBOTTOM:l=
k.right()-c.lZone().legendMargin()-a.w,m=k.bottom()-a.h-c.lZone().legendMargin()}l=new p.Rectangle(new p.Point(l,m),new p.Point(l+a.w,m+a.h));return{xZone:e,yZone:f,sZone:k,lZone:l}};this.endUpdate()};n.Chart.prototype.onSeriesMouseOver=function(f){this.eventInvoke(n.EVT_SERIES_POINT_MOUSEOVER,f)};n.Chart.prototype.onSeriesMouseOut=function(f){this.eventInvoke(n.EVT_SERIES_POINT_MOUSEOUT,f)};n.Chart.prototype.onSeriesClick=function(f){this.eventInvoke(n.EVT_SERIES_POINT_CLICK,f)};n.Chart.prototype.onSeriesPointTitleMouseOver=
function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_MOUSEOVER,f)};n.Chart.prototype.onSeriesPointTitleMouseOut=function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_MOUSEOUT,f)};n.Chart.prototype.onSeriesPointTitleClick=function(f){this.eventInvoke(n.EVT_SERIES_POINT_TITLE_CLICK,f)};return n}();WAVE.Pay.Providers.Braintree=function(){var g={TYPE:"braintree",clientToken:null,initialize:function(n){if(WAVE.strEmpty(n.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");g.clientToken=n.publicKey},tokenize:function(n,p,f){if(WAVE.strEmpty(g.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(p.cardNumber)||WAVE.strEmpty(p.cardExpMonth)||
WAVE.strEmpty(p.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var v={number:p.cardNumber,expirationMonth:p.cardExpMonth,expirationYear:p.cardExpYear};WAVE.strEmpty(p.cardCVC)||(v.cvv=p.cardCVC);WAVE.strEmpty(p.cardHolder)||(v.cardholderName=p.cardHolder);WAVE.strEmpty(p.cardAddressZip)||(v.billingAddress={postalCode:p.cardAddressZip});var t=g.clientToken;g.clientToken=null;
(new braintree.api.Client({clientToken:t})).tokenizeCard(v,function(t,r){var e={requestContext:{facade:n,paymentData:p},OK:!0,httpStatus:null,providerType:g.TYPE,providerName:n.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(t))e.tokenString=r;else{e.OK=!1;var b;b=WAVE.strEmpty(t)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;e.errorCode=b;b=WAVE.strEmpty(t)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
e.errorType=b;e.errorMessage=t;e.errorParams={};e.rawError=t}f(e)})}};return g}();WAVE.Pay.Providers.Stripe=function(){function g(g){switch(g){case "200":return f.HTTPStatus.STATUS200;case "400":return f.HTTPStatus.STATUS400;case "401":return f.HTTPStatus.STATUS401;case "402":return f.HTTPStatus.STATUS402;case "404":return f.HTTPStatus.STATUS404;case "429":return f.HTTPStatus.STATUS429;case "500":return f.HTTPStatus.STATUS50X;case "502":return f.HTTPStatus.STATUS50X;case "503":return f.HTTPStatus.STATUS50X;case "504":return f.HTTPStatus.STATUS50X}return g}function n(f){switch(f){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function p(f){switch(f){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var f={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(f){if(WAVE.strEmpty(f.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(f.publicKey)},tokenize:function(v,t,x){if(WAVE.strEmpty(t.cardNumber)||WAVE.strEmpty(t.cardExpMonth)||WAVE.strEmpty(t.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var r={number:t.cardNumber.replace(/\s+|-/g,
""),exp_month:2==t.cardExpMonth.length?"0"+t.cardExpMonth:t.cardExpMonth,exp_year:t.cardExpYear};WAVE.strEmpty(t.cardCVC)||(r.cvc=t.cardCVC);WAVE.strEmpty(t.cardHolder)||(r.name=t.cardHolder);WAVE.strEmpty(t.cardAddressLine1)||(r.address_line1=t.cardAddressLine1);WAVE.strEmpty(t.cardAddressLine2)||(r.address_line2=t.cardAddressLine2);WAVE.strEmpty(t.cardAddressCity)||(r.address_city=t.cardAddressCity);WAVE.strEmpty(t.cardAddressState)||(r.address_state=t.cardAddressState);WAVE.strEmpty(t.cardAddressZip)||
(r.address_zip=t.cardAddressZip);WAVE.strEmpty(t.cardAddressCountry)||(r.address_country=t.cardAddressCountry);Stripe.card.createToken(r,function(e,b){var l={requestContext:{facade:v,paymentData:t},OK:200<=e&&300>e,httpStatus:e,httpStatusDescr:g(e),providerType:f.TYPE,providerName:v.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(b.error)){l.tokenString=b.id;var c=b.card;l.card={providerID:c.id,addressCity:c.address_city,
addressCountry:c.address_country,addressLine1:c.address_line1,addressLine2:c.address_line2,addressState:c.address_state,addressZip:c.address_zip,brand:c.brand,CVCcheck:c.cvc_check,expirationMonth:c.exp_month,expirationYear:c.exp_year,fundingType:c.funding,last4:c.last4,holder:c.name}}else l.OK=!1,l.errorCode=p(b.error.code),l.errorType=n(b.error.type),l.errorMessage=b.error.message,l.errorParams={0:b.error.param},l.rawError=b.error;x(l)})}};return f}();
